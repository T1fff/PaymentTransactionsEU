[["index.html", "Análisis Exploratorio de Datos Chapter 1 Contexto inicial Objetivo del análisis Origen y descripción del dataset Identificación de valores faltantes", " Análisis Exploratorio de Datos Tiffany Mendoza S. y Sergio Rada 2026-02-27 Chapter 1 Contexto inicial La Unión Europea es la unión politica de estados que cooperan y coordinan sus gobiernos a traves de instituciones comunes como el Parlamento, el Consejo, el Tribunal de Justicia que velan por el bienestar integral de todos sus países miembro. Una de sus caracteristicas más llamativas es la unificación casi total de la moneda principal (El euro) utilizada para las actividades comerciales. Esta uniformidad posibilita la existencia de la infraestructura T2, que permite que las transferencias y movimientos bancarios se reflejen en tiempo real. Aún así, es importante resaltar que no todos los estados que constituyen la UE utilizan el euro. De la misma manera, existen territorios como Andorra, Mónaco, San Marino que no pertenecen a la comunidad europea, pero sí utilizan el euro por tener acuerdos económicos particulares. Estas políticas son manejadas por el Banco Central Europeo, institución encargada de velar por la política monetaria de la zona euro. Es decir, es la entidad principal que busca preservar la estabilidad del poder adquisitivo del euro en el mediano y largo plazo. Objetivo del análisis Construir un modelo de estimación capaz de identificar fraudes en transacciones en el dataset de movimientos bancarios de Europa. Analizar la calidad, cobertura y estructura de los datos. Identificar el set de caracteristicas orientadas a detectar fraude presentes en el dataset. Desarrollar el modelo de estimación que estime si una transaccion fue fraudulante dadas determinadas caracteristicas. Origen y descripción del dataset El presente dataset muestra estadisticas de alto nivel sobre el total de transacciones financieras legales y fraudulentas realizadas en la Unión Europea. Esta información es recolectada por el Banco Central Europeo (ECB), entidad que valida semestralmente los reportes enviados por los Bancos Centrales Nacionales del continente. La última actualización fue realizada el 29 de enero del presente año y se encuentra disponible en el repositorio publico de datos del ECB. Caracterización general Como veremos a continuación, el dataset cuenta con 662.616 transacciones caracterizadas en 29 columnas que serán descritas en la siguiente sección. nrow(datos) ## [1] 662616 ncol(datos) ## [1] 29 colnames(datos) ## [1] &quot;KEY&quot; &quot;FREQ&quot; &quot;REF_AREA&quot; &quot;COUNT_AREA&quot; ## [5] &quot;TYP_TRNSCTN&quot; &quot;RL_TRNSCTN&quot; &quot;FRD_TYP&quot; &quot;TRANSFORMATION&quot; ## [9] &quot;UNIT_MEASURE&quot; &quot;TIME_PERIOD&quot; &quot;OBS_VALUE&quot; &quot;OBS_STATUS&quot; ## [13] &quot;CONF_STATUS&quot; &quot;PRE_BREAK_VALUE&quot; &quot;COMMENT_OBS&quot; &quot;TIME_FORMAT&quot; ## [17] &quot;BREAKS&quot; &quot;COMMENT_TS&quot; &quot;COMPILING_ORG&quot; &quot;DISS_ORG&quot; ## [21] &quot;TIME_PER_COLLECT&quot; &quot;COVERAGE&quot; &quot;DATA_COMP&quot; &quot;DECIMALS&quot; ## [25] &quot;METHOD_REF&quot; &quot;TITLE&quot; &quot;TITLE_COMPL&quot; &quot;UNIT&quot; ## [29] &quot;UNIT_MULT&quot; str(datos) ## &#39;data.frame&#39;: 662616 obs. of 29 variables: ## $ KEY : chr &quot;PAY.A.AT.BG.TOTL.1._Z.N.PN&quot; &quot;PAY.A.AT.BG.TOTL.1._Z.N.PN&quot; &quot;PAY.A.AT.BG.TOTL.1._Z.N.PN&quot; &quot;PAY.A.AT.BG.TOTL.1._Z.N.PN&quot; ... ## $ FREQ : chr &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ... ## $ REF_AREA : chr &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; &quot;AT&quot; ... ## $ COUNT_AREA : chr &quot;BG&quot; &quot;BG&quot; &quot;BG&quot; &quot;BG&quot; ... ## $ TYP_TRNSCTN : chr &quot;TOTL&quot; &quot;TOTL&quot; &quot;TOTL&quot; &quot;TOTL&quot; ... ## $ RL_TRNSCTN : chr &quot;1&quot; &quot;1&quot; &quot;1&quot; &quot;1&quot; ... ## $ FRD_TYP : chr &quot;_Z&quot; &quot;_Z&quot; &quot;_Z&quot; &quot;_Z&quot; ... ## $ TRANSFORMATION : chr &quot;N&quot; &quot;N&quot; &quot;N&quot; &quot;N&quot; ... ## $ UNIT_MEASURE : chr &quot;PN&quot; &quot;PN&quot; &quot;PN&quot; &quot;PN&quot; ... ## $ TIME_PERIOD : chr &quot;2014&quot; &quot;2015&quot; &quot;2016&quot; &quot;2017&quot; ... ## $ OBS_VALUE : num 0.242 0.268 0.689 0.632 0.615 ... ## $ OBS_STATUS : chr &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; ... ## $ CONF_STATUS : logi FALSE FALSE FALSE FALSE FALSE FALSE ... ## $ PRE_BREAK_VALUE : logi NA NA NA NA NA NA ... ## $ COMMENT_OBS : chr &quot;&quot; &quot;&quot; &quot;&quot; &quot;&quot; ... ## $ TIME_FORMAT : chr &quot;P1Y&quot; &quot;P1Y&quot; &quot;P1Y&quot; &quot;P1Y&quot; ... ## $ BREAKS : logi NA NA NA NA NA NA ... ## $ COMMENT_TS : logi NA NA NA NA NA NA ... ## $ COMPILING_ORG : logi NA NA NA NA NA NA ... ## $ DISS_ORG : logi NA NA NA NA NA NA ... ## $ TIME_PER_COLLECT: chr &quot;S&quot; &quot;S&quot; &quot;S&quot; &quot;S&quot; ... ## $ COVERAGE : logi NA NA NA NA NA NA ... ## $ DATA_COMP : logi NA NA NA NA NA NA ... ## $ DECIMALS : int 3 3 3 3 3 3 3 3 3 3 ... ## $ METHOD_REF : chr &quot;unspecified&quot; &quot;unspecified&quot; &quot;unspecified&quot; &quot;unspecified&quot; ... ## $ TITLE : chr &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; ... ## $ TITLE_COMPL : chr &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; &quot;Total payment transactions, incl. cash withdrawals, sent to Bulgaria&quot; ... ## $ UNIT : chr &quot;PN&quot; &quot;PN&quot; &quot;PN&quot; &quot;PN&quot; ... ## $ UNIT_MULT : int 6 6 6 6 6 6 6 6 6 6 ... Diccionario de columnas 1. KEY: Clave compuesta de transacción 2. FREQ: Frecuencia con la que se realiza determinado pago (Anual, trimestral, semestral, etc.). 3. REF_AREA: País origen de la transacción. 4. COUNT_AREA: Institución origen de la transacción. 5. TYP_TRNSCTN: Clasificación de la transacción (Depósito, retiro, cheques, transferencias, etc.). 6. RL_TRNSCTN: Clasificación de la entidad procesa la transacción. 7. FRD_TYP: Clasificación del fraude (No autorizado, tarjeta robada, sin fraude, etc). 8. TRANSFORMATION: Transformación realizada a la transacción (niveles anuales, contribución a la tasa, promedio móvil, no aplica). 9. UNIT_MEASURE: Unidad o divisa involucrada en la transacción. 10. TIME_PERIOD: Año en el que se procesó la transacción. 11. OBS_VALUE: Monto de la transacción. 12. OBS_STATUS: Clasificación del monto de la transacción (revisado, no validado, valor provisional, etc). 13. CONF_STATUS: Clasificación de confidencialidad (Libre, restringido, etc). 14. PRE_BREAK_VALUE: No especificada en la documentación. 15. COMMENT_OBS: Observaciones. 16. TIME_FORMAT: No especificada en la documentación. 17. BREAKS: No especificada en la documentación. 18. COMMENT_TS: No especificada en la documentación. 19. COMPILING_ORG: No especificada en la documentación. 20. DISS_ORG: No especificada en la documentación. 21. TIME_PER_COLLECT: No especificada en la documentación. 22. COVERAGE: No especificada en la documentación. 23. DATA_COMP: No especificada en la documentación. 24. decimales: Indica la cantidad de decimales presentes en el monto. 25. METHOD_REF: Metodolofia utilizada para la recolección del dato. 26. TITLE: Descripción de transacción. 27. TITLE_COMPL: Columna copia de TITLE. 28. UNIT: Columna copia de UNIT_MEASURE. 29. UNIT_MULT: Indica el multiplicador del monto de la transacción. 1.0.1 Comprobación de columna repetidas 1.0.1.1 UNIT_MEASURE == UNIT print(identical(datos$UNIT_MEASURE, datos$UNIT)) ## [1] TRUE print(identical(datos$TITLE, datos$TITLE_COMPL)) ## [1] TRUE Columnas a utilizar Si se analiza detenidamente, se encuentran varias columnas con información duplicada. Del mismo modo, hay columnas cuya información no se encuentra adecuadamente documentada dificultando así la clasificación de su impacto en el conjunto de datos. Por tanto, solo se tendrán en cuenta las columnas listadas a continuación: 1. KEY &gt;&gt; clave: Clave compuesta de transacción. 2. FREQ &gt;&gt; frecuencia: Frecuencia con la que se realiza determinado pago (Anual, trimestral, semestral, etc.) 3. REF_AREA &gt;&gt; pais_origen: País origen de la transacción. 4. COUNT_AREA &gt;&gt; pais_destino: Institución origen de la transacción. 5. TYP_TRNSCTN &gt;&gt; tipo_trx : Clasificación de la transacción (Depósito, retiro, cheques, transferencias, etc.). 6. RL_TRNSCTN &gt;&gt; tipo_psp : Clasificación de la entidad procesa la transacción. 7. FRD_TYP &gt;&gt; tipo_fraude: Clasificación del fraude (No autorizado, tarjeta robada, sin fraude, etc). 9. UNIT_MEASURE &gt;&gt; unidad: Unidad o divisa involucrada en la transacción. 10. TIME_PERIOD &gt;&gt; anio: Año en el que se procesó la transacción. 11. OBS_VALUE &gt;&gt; monto: Monto de la transacción. 12. OBS_STATUS &gt;&gt; tipo_monto: Clasificación del monto de la transacción (revisado, no validado, valor provisional, etc). 24. DECIMALS &gt;&gt; decimales: Indica la cantidad de decimales presentes en el monto. 26. TITLE &gt;&gt; descripcion: Descripción de transacción. 29. UNIT_MULT &gt;&gt; multiplicador_unidad: Indica el multiplicador del monto de la transacción. Dataframe resultante datos %&gt;% select(clave=KEY, frecuencia=FREQ, pais_origen=REF_AREA, pais_destino=COUNT_AREA, tipo_trx=TYP_TRNSCTN, tipo_psp=RL_TRNSCTN, tipo_fraude=FRD_TYP, unidad=UNIT_MEASURE, anio=TIME_PERIOD, monto=OBS_VALUE, tipo_monto=OBS_STATUS, decimales=DECIMALS, descripcion=TITLE, multiplicador_unidad=UNIT_MULT) -&gt; df kable(head(df)) %&gt;% scroll_box(width = &quot;100%&quot;) clave frecuencia pais_origen pais_destino tipo_trx tipo_psp tipo_fraude unidad anio monto tipo_monto decimales descripcion multiplicador_unidad PAY.A.AT.BG.TOTL.1._Z.N.PN A AT BG TOTL 1 _Z PN 2014 0.242 A 3 Total payment transactions, incl. cash withdrawals, sent to Bulgaria 6 PAY.A.AT.BG.TOTL.1._Z.N.PN A AT BG TOTL 1 _Z PN 2015 0.268 A 3 Total payment transactions, incl. cash withdrawals, sent to Bulgaria 6 PAY.A.AT.BG.TOTL.1._Z.N.PN A AT BG TOTL 1 _Z PN 2016 0.689 A 3 Total payment transactions, incl. cash withdrawals, sent to Bulgaria 6 PAY.A.AT.BG.TOTL.1._Z.N.PN A AT BG TOTL 1 _Z PN 2017 0.632 A 3 Total payment transactions, incl. cash withdrawals, sent to Bulgaria 6 PAY.A.AT.BG.TOTL.1._Z.N.PN A AT BG TOTL 1 _Z PN 2018 0.615 A 3 Total payment transactions, incl. cash withdrawals, sent to Bulgaria 6 PAY.A.AT.BG.TOTL.1._Z.N.PN A AT BG TOTL 1 _Z PN 2019 1.467 A 3 Total payment transactions, incl. cash withdrawals, sent to Bulgaria 6 Identificación de valores faltantes missmap(df) df %&gt;% summarise(across(everything(), ~ sum(is.na(.)), .names = &quot;NA_{.col}&quot;)) ## NA_clave NA_frecuencia NA_pais_origen NA_pais_destino NA_tipo_trx NA_tipo_psp ## 1 0 0 0 0 0 0 ## NA_tipo_fraude NA_unidad NA_anio NA_monto NA_tipo_monto NA_decimales ## 1 0 0 0 143875 0 0 ## NA_descripcion NA_multiplicador_unidad ## 1 0 0 Al explorar un poco más el dataset, se encuentra que la mayoría de columnas tienen 0 valores faltantes en las observaciones. Aún así, es importante destacar que la columna monto concentra el total de missing values con 143875 NAs. "],["analisis-univariado.html", "Chapter 2 Analisis Univariado Variable objetivo: tipo_fraude Variables Características Categóricas Variables Características Numéricas", " Chapter 2 Analisis Univariado A continuación se procederá a examinar cada variable de forma individual con el objetivo de entender su distribución, medidas centrales y de dispersión. Para complementar el análisis utilizaremos tablas estadísticas y gráficas según se considere adecuado. Variable objetivo: tipo_fraude Tabla lookupf &lt;- tibble( Categoria = c(&quot;F&quot;, &quot;_Z&quot;), Nombre = c(&quot;Fraude&quot;, &quot;No Fraude&quot;) ) tabla_y &lt;- df %&gt;% count(Categoria=tipo_fraude, name = &quot;Fraude&quot;) %&gt;% mutate(Porcentaje = round(Fraude / sum(Fraude) * 100, 1)) %&gt;% left_join(lookupf, by = &quot;Categoria&quot;) %&gt;% mutate(Categoria = factor(Categoria, levels = Categoria)) kable(tabla_y) Categoria Fraude Porcentaje Nombre F 1944 0.3 Fraude _Z 660672 99.7 No Fraude La variable tipo_fraude representa la clasificación del fraude indentificado en una transacción. Del total de observaciones, 660.672 no están relacionadas a un caso de fraude, mientras que 1944 transacciones fueron marcadas como movimientos fraudulentos. Debido al alto desequilibrio entre las observaciones legales y las transacciones fraudulentas se debe tener mucha precaución a la hora de construir el modelo de predicción. Gráfico tabla_y %&gt;% ggplot(aes(x = Categoria, y = Fraude)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(Fraude, &quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = -0.5, size = 3) + scale_y_continuous(labels = comma) + labs(x = &quot;Tipo de transacción&quot;, y = &quot;Núm. de transacciones&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) Este gráfico muestra la distribución del tipo de transacción, confirmando que la mayoria de transacciones observadas no fueron marcadas como fraude. Puntualmente el 99.7% de las transacciones fueron consideradas legales, mientras que el 0.3% fueron asociadas con algún comportamiento irregular. Esta notable diferencia indica un alto desbalance en las clases de la variable objetivo, lo cual es importante destacar al momento de construir modelos predictivos. Variables Características Categóricas A continuación se examinarán detenidamente cada una de las variables. clave Clave compuesta identificadora de las caracteristicas generales de una transacción. No es única. tabla_ID &lt;- df %&gt;% count(Categoria=clave, name = &quot;Frecuencia&quot;) %&gt;% arrange(desc(Frecuencia)) kable(head(tabla_ID)) Categoria Frecuencia PAY.A.AT.W0.CHQ.2._Z.G1.EUR 25 PAY.A.AT.W0.CHQ.2._Z.G1.PN 25 PAY.A.AT.W0.CHQ.2._Z.N.EUR 25 PAY.A.AT.W0.CHQ.2._Z.N.EUR_R_PNT 25 PAY.A.AT.W0.CHQ.2._Z.N.EUR_R_POP 25 PAY.A.AT.W0.CHQ.2._Z.N.EUR_R_TT 25 Como se ve en la tabla, la columna KEY corresponde a una clave compuesta por las prinicpales caracteristicas de transacción como el tipo de monto, la unidad, tipo de fraude, etc. frecuencia Describe la recurrencia con la que se realiza determinado pago (Anual, trimestral, semestral, etc.). Se categoriza en: - A: Transacciones anuales - H: Transacciones semestrales - Q: Transacciones trimestrales Tabla tabla_freq &lt;- df %&gt;% count(Categoria=frecuencia, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) kable(tabla_freq) Categoria Frecuencia Porcentaje A 275179 41.53 H 236884 35.75 Q 150553 22.72 Gráfico # Gráfico tabla_freq %&gt;% ggplot(aes(x = factor(Categoria), y = Frecuencia)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(Frecuencia, &quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = -0.5, size = 3) + scale_y_continuous(labels = comma) + labs(x = &quot;Frecuencia de transacción&quot;, y = &quot;Núm. de transacciones&quot;) + theme_bw(base_size = 14) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) La tabla y gráfico anteriores describen la distribución de la variable frecuencia del dataset, que permite caracterizar la recurrencia habitual de las transacciones. Las transacciones anuales (A) representan un 41.53% del total, mientras que la frecuencia semestral (H) y trimestral (Q) agrupan un 35.75% y 22.72%, cada una. En números exactos esto es 275.179, 236.884 y 150.553 transacciones respectivamente. pais_origen Presenta el código del país origen del movimiento bancario. Tabla lookup &lt;- tibble( Categoria = c(&quot;RO&quot;,&quot;HU&quot;,&quot;PL&quot;,&quot;CZ&quot;,&quot;NL&quot;,&quot;PT&quot;,&quot;LT&quot;,&quot;DE&quot;,&quot;FI&quot;,&quot;LU&quot;,&quot;GR&quot;,&quot;BE&quot;,&quot;ES&quot;,&quot;LV&quot;,&quot;IT&quot;,&quot;AT&quot;,&quot;FR&quot;,&quot;IE&quot;,&quot;CY&quot;,&quot;EE&quot;,&quot;SK&quot;,&quot;SI&quot;,&quot;MT&quot;,&quot;BG&quot;,&quot;HR&quot;,&quot;DK&quot;,&quot;U2&quot;,&quot;B0&quot;,&quot;SE&quot;), NombrePais = c(&quot;Romania&quot;,&quot;Hungary&quot;,&quot;Poland&quot;,&quot;Czech Republic&quot;,&quot;Netherlands&quot;,&quot;Portugal&quot;,&quot;Lithuania&quot;,&quot;Germany&quot;,&quot;Finland&quot;,&quot;Luxembourg&quot;,&quot;Greece&quot;,&quot;Belgium&quot;,&quot;Spain&quot;,&quot;Latvia&quot;,&quot;Italy&quot;,&quot;Austria&quot;,&quot;France&quot;,&quot;Ireland&quot;,&quot;Cyprus&quot;,&quot;Estonia&quot;,&quot;Slovakia&quot;,&quot;Slovenia&quot;,&quot;Malta&quot;,&quot;Bulgaria&quot;,&quot;Croatia&quot;,&quot;Denmark&quot;,&quot;Euro Area changing composition&quot;,&quot;EU changing composition&quot;,&quot;Sweden&quot;) ) tabla_country &lt;- df %&gt;% count(Categoria=pais_origen, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) %&gt;% left_join(lookup, by = &quot;Categoria&quot;) %&gt;% mutate(Categoria = factor(Categoria, levels = Categoria)) kable(tabla_country) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje NombrePais RO 28816 4.35 Romania HU 28794 4.35 Hungary PL 28267 4.27 Poland CZ 28133 4.25 Czech Republic NL 27274 4.12 Netherlands PT 25672 3.87 Portugal LT 25590 3.86 Lithuania DE 25219 3.81 Germany FI 25162 3.80 Finland LU 25156 3.80 Luxembourg GR 25146 3.79 Greece BE 25145 3.79 Belgium ES 25139 3.79 Spain LV 25132 3.79 Latvia IT 25130 3.79 Italy AT 25125 3.79 Austria FR 25119 3.79 France IE 25115 3.79 Ireland CY 25109 3.79 Cyprus EE 25108 3.79 Estonia SK 25108 3.79 Slovakia SI 25104 3.79 Slovenia MT 25090 3.79 Malta BG 24652 3.72 Bulgaria HR 23980 3.62 Croatia DK 10768 1.63 Denmark U2 3352 0.51 Euro Area changing composition B0 3220 0.49 EU changing composition SE 1991 0.30 Sweden Gráfico # Gráfico tabla_country %&gt;% ggplot(aes(x = Frecuencia, y = Categoria)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(&quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = 0.3, hjust=-0.1, size = 2) + scale_x_continuous(labels = comma) + labs(x = &quot;Núm. de transacciones&quot;, y = &quot;País&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) La tabla y gráfico anteriores describen la distribución de la variable pais_origen del dataset, que permite caracterizar el origen de las transacciones. A simple vista se puede notar que los países tienen frecuencias muy similares, no hay único país que destaque de forma dominante frente a los demás. Romania, Hungría, Polonia, República Checa y Paises bajos son los 5 territorios con el porcentaje de origen más alto superior al 4% cada uno. Por otro lado, encontramos entidades especiales como la “Euro Area changing composition” y “EU changing composition” que presentan una baja frecuencia frente a otros mercados (menos del 1%). Euro Area changing composition/EU changing composition: hace referencia a países que han sido incluidos/excluidos de la zona del euro o en la unión europea en el transcurso de los años. Por ejemplo, Grecia se incorporó al uso del euro en el año 2000, mientras que Groenlandia que se retiró de la Unión Europea (anteriormente Comunidad Europea) en 1985. pais_destino Presenta el código del país destino del movimiento bancario. Tabla lookup_org &lt;- tibble( Categoria = c(&quot;W0&quot;,&quot;W1&quot;,&quot;W2&quot;,&quot;G1&quot;,&quot;SE&quot;,&quot;DK&quot;,&quot;BG&quot;,&quot;GR&quot;,&quot;AT&quot;,&quot;BE&quot;,&quot;SI&quot;,&quot;SK&quot;,&quot;CY&quot;,&quot;ES&quot;,&quot;FI&quot;,&quot;FR&quot;,&quot;IT&quot;,&quot;DE&quot;,&quot;IE&quot;,&quot;EE&quot;,&quot;LU&quot;,&quot;MT&quot;,&quot;LV&quot;,&quot;HR&quot;,&quot;LT&quot;,&quot;PT&quot;,&quot;CZ&quot;,&quot;PL&quot;,&quot;HU&quot;,&quot;RO&quot;,&quot;NL&quot;,&quot;G3&quot;,&quot;NO&quot;,&quot;IS&quot;,&quot;LI&quot;,&quot;AR&quot;,&quot;AU&quot;,&quot;BR&quot;,&quot;CA&quot;,&quot;CN&quot;,&quot;GB&quot;,&quot;ID&quot;,&quot;IN&quot;,&quot;JP&quot;,&quot;KR&quot;,&quot;MX&quot;,&quot;RU&quot;,&quot;SA&quot;,&quot;TR&quot;,&quot;US&quot;,&quot;ZA&quot;), NombrePais = c(&quot;World&quot;,&quot;Rest of the World&quot;,&quot;Domestic (home or reference area)&quot;,&quot;Extra EEA&quot;,&quot;Sweden&quot;,&quot;Denmark&quot;,&quot;Bulgaria&quot;,&quot;Greece&quot;,&quot;Austria&quot;,&quot;Belgium&quot;,&quot;Slovenia&quot;,&quot;Slovakia&quot;,&quot;Cyprus&quot;,&quot;Spain&quot;,&quot;Finland&quot;,&quot;France&quot;,&quot;Italy&quot;,&quot;Germany&quot;,&quot;Ireland&quot;,&quot;Estonia&quot;,&quot;Luxembourg&quot;,&quot;Malta&quot;,&quot;Latvia&quot;,&quot;Croatia&quot;,&quot;Lithuania&quot;,&quot;Portugal&quot;,&quot;Czech Republic&quot;,&quot;Poland&quot;,&quot;Hungary&quot;,&quot;Romania&quot;,&quot;Netherlands&quot;,&quot;Other EEA countries (all countries excluding the reference area)&quot;,&quot;Norway&quot;,&quot;Iceland&quot;,&quot;Liechtenstein&quot;,&quot;Argentina&quot;,&quot;Australia&quot;,&quot;Brazil&quot;,&quot;Canada&quot;,&quot;China&quot;,&quot;United Kingdom&quot;,&quot;Indonesia&quot;,&quot;India&quot;,&quot;Japan&quot;,&quot;Korea, Republic of&quot;,&quot;Mexico&quot;,&quot;Russian Federation&quot;,&quot;Saudi Arabia&quot;,&quot;Turkey&quot;,&quot;United States&quot;,&quot;South Africa&quot;) ) tabla_country_dest &lt;- df %&gt;% count(Categoria=pais_destino, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) %&gt;% left_join(lookup_org, by = &quot;Categoria&quot;) %&gt;% mutate(Categoria = factor(Categoria, levels = Categoria)) kable(tabla_country_dest) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje NombrePais W0 88733 13.39 World W1 21755 3.28 Rest of the World W2 21507 3.25 Domestic (home or reference area) G1 17392 2.62 Extra EEA SE 16057 2.42 Sweden DK 15769 2.38 Denmark BG 15488 2.34 Bulgaria GR 15440 2.33 Greece AT 15437 2.33 Austria BE 15437 2.33 Belgium SI 15437 2.33 Slovenia SK 15437 2.33 Slovakia CY 15436 2.33 Cyprus ES 15436 2.33 Spain FI 15436 2.33 Finland FR 15436 2.33 France IT 15436 2.33 Italy DE 15435 2.33 Germany IE 15435 2.33 Ireland EE 15434 2.33 Estonia LU 15434 2.33 Luxembourg MT 15433 2.33 Malta LV 15432 2.33 Latvia HR 15429 2.33 Croatia LT 15417 2.33 Lithuania PT 15417 2.33 Portugal CZ 15413 2.33 Czech Republic PL 15401 2.32 Poland HU 15386 2.32 Hungary RO 15385 2.32 Romania NL 15369 2.32 Netherlands G3 13173 1.99 Other EEA countries (all countries excluding the reference area) NO 11735 1.77 Norway IS 11732 1.77 Iceland LI 11727 1.77 Liechtenstein AR 2960 0.45 Argentina AU 2960 0.45 Australia BR 2960 0.45 Brazil CA 2960 0.45 Canada CN 2960 0.45 China GB 2960 0.45 United Kingdom ID 2960 0.45 Indonesia IN 2960 0.45 India JP 2960 0.45 Japan KR 2960 0.45 Korea, Republic of MX 2960 0.45 Mexico RU 2960 0.45 Russian Federation SA 2960 0.45 Saudi Arabia TR 2960 0.45 Turkey US 2960 0.45 United States ZA 2960 0.45 South Africa Gráfico # Gráfico tabla_country_dest %&gt;% ggplot(aes(x = Frecuencia, y = Categoria)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(&quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = 0.5, hjust=-0.1, size = 1.8) + scale_x_continuous(labels = comma) + labs(x = &quot;Núm. de transacciones&quot;, y = &quot;pais_destino&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 6) ) La tabla y gráfico anteriores describen la distribución de la variable pais_destino del dataset, que permite caracterizar el destino de las transacciones. Empezamos destacando que el 22.54% de las transacciones no especifican el destino final si no que generalizan en entidades como World, Rest of the World, Domestic y Extra EEA cada una con una representación del 13%, 3.28%, 3.25% y 2.62%. Para los paises europeos explicitamente listados se manejan porcentajes de representación del 2% cada uno aproximadamente. Mientras que, los paises destino fuera de la EEA comprenden menos del 1% cada uno. World: Hace referencia a todo el conjunto de pais e instituciones existentes, incluyendo al país de referencia. Rest of the world: Hace referencia a todo el conjunto de pais e instituciones existentes, excluyendo al país de origen. Domestic: Hace referencia a las entidades dentro del territorio economico de un país Extra EEA: Hace referencia a los demás paises y entidades del Espacio Económico Europeo, incluyendo Noruega, Islandia y Liechtenstein. Other EEA countries (all countries excluding the reference area): Hace referencia a los demás paises y entidades del Espacio Económico Europeo excluyendo al país de origen tipo_trx Describe el tipo de movimiento bancario realizado. Tabla lookup_instrument &lt;- tibble( Categoria = c(&quot;CHQ&quot;,&quot;CP0&quot;,&quot;CT0&quot;,&quot;CW1&quot;,&quot;DD&quot;,&quot;EMP0&quot;,&quot;MREM&quot;,&quot;ND0&quot;,&quot;ND1&quot;,&quot;ND2&quot;,&quot;ND3&quot;,&quot;SER&quot;,&quot;TOTL&quot;,&quot;TOTL1&quot;), NombreInstrumento = c( &quot;Cheques&quot;, &quot;Card payments&quot;, &quot;Credit transfers&quot;, &quot;Cash withdrawals using cards&quot;, &quot;Direct debits&quot;, &quot;E-money payments&quot;, &quot;Money remittances&quot;, &quot;Other services (not included in Directive (EU) 2013/2466)&quot;, &quot;Credits to the accounts by simple book entry&quot;, &quot;Debits from the accounts by simple book entry&quot;, &quot;Other services than credits and debits from the accounts by simple book entry&quot;, &quot;Other payment services&quot;, &quot;Total payment transactions&quot;, &quot;Total payment transactions, excluding cash withdrawals&quot; ) ) tabla_typetrx &lt;- df %&gt;% count(Categoria=tipo_trx, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) %&gt;% left_join(lookup_instrument, by = &quot;Categoria&quot;) %&gt;% mutate(Categoria = factor(Categoria, levels = Categoria)) kable(tabla_typetrx) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje NombreInstrumento DD 96675 14.59 Direct debits CT0 96663 14.59 Credit transfers EMP0 92772 14.00 E-money payments CHQ 92173 13.91 Cheques CP0 59765 9.02 Card payments SER 56997 8.60 Other payment services MREM 52272 7.89 Money remittances TOTL 48151 7.27 Total payment transactions TOTL1 44336 6.69 Total payment transactions, excluding cash withdrawals CW1 18738 2.83 Cash withdrawals using cards ND1 1624 0.25 Credits to the accounts by simple book entry ND2 1624 0.25 Debits from the accounts by simple book entry ND0 415 0.06 Other services (not included in Directive (EU) 2013/2466) ND3 411 0.06 Other services than credits and debits from the accounts by simple book entry Gráfico # Gráfico tabla_typetrx %&gt;% ggplot(aes(x = factor(Categoria), y = Frecuencia)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(&quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = -0.5, size = 2.2) + scale_y_continuous(labels = comma) + labs(x = &quot;Tipo de transacción&quot;, y = &quot;Núm. de transacciones&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) La tabla y gráfico anteriores describen la distribución de la variable tipo_trx del dataset, que permite caracterizar el movimiento bancario realizado y su instrumento. Los debitos directos y transferencias de credito son las categorías más grandes con un porcentaje del 14.59% cada una, seguida por pagos electronicos (13.91%) y cheques (9.02%). El pago por tarjetas de credito predomina ligeramente sobre otros servicios de pago, observandose un 9.02% sobre un 8.60%. Con aproximadamente un 1% de participación la categorías ND* son marginales y podría considerarse su agrupación. Mientras que las columnas de TOTL y TOLT representan rotales agregados, no instrumentos individuales. tipo_psp Caracteriza al proveedor que realiza la transacción. Se categoriza en: - 1 Payer’s PSP: Proveedor de servicios de pago del pagador. Entidad que procesa el pago de quien envía el dinero. - 2 Payee’s PSP: Proveedor de servicios de pago del beneficiario. Entidad que procesa el pago de quien recibe el dinero. **- _Z NA:** Transacciones sin rol definifido o internas. Tabla tabla_psp &lt;- df %&gt;% count(Categoria=tipo_psp, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) kable(tabla_psp) Categoria Frecuencia Porcentaje 1 387724 58.51 2 270818 40.87 _Z 4074 0.61 Gráfico # Gráfico tabla_psp %&gt;% ggplot(aes(x = factor(Categoria), y = Frecuencia)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(Frecuencia, &quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = -0.5, size = 3) + scale_y_continuous(labels = comma) + labs(x = &quot;Tipo de transacción&quot;, y = &quot;Núm. de transacciones&quot;) + theme_bw(base_size = 14) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) La tabla y gráfico anteriores describen la distribución de la variable tipo_psp del dataset, que permite caracterizar el rol de la transacción. El 58.51% de las transacciones se registraron desde el psp del pagador, esto es 387.724, frente a 270.818 o 40.87% asociadas al psp del beneficiario. Por otro lado, se tiene un 0.61% de transacciones no asociadas a ninguna de las clasificaciones anteriores, quizá por tratarse de movimientos monetarios internos. unidad Unidad o divisa involucrada en la transacción. Tabla lookup_currency &lt;- tibble( Categoria = c(&quot;PN&quot;,&quot;EUR&quot;,&quot;XDF&quot;,&quot;PN_R_POP&quot;,&quot;EUR_R_POP&quot;,&quot;EUR_R_TT&quot;,&quot;PN_R_TT&quot;, &quot;EUR_R_PNT&quot;,&quot;EUR_R_B1GQ&quot;,&quot;XDF_R_TT&quot;,&quot;XDF_R_PNT&quot;,&quot;XDF_R_POP&quot;, &quot;PN_R_POP6&quot;,&quot;EUR_R_POP6&quot;,&quot;XDF_R_POP6&quot;), NombreUnidad = c( &quot;Pure number&quot;, &quot;Euro&quot;, &quot;Domestic currency (incl. conversion to current currency made using a fixed parity or market exchange rate)&quot;, &quot;Pure number per capita&quot;, &quot;Euro per capita&quot;, &quot;Euro; ratio to total value payment transactions&quot;, &quot;Pure number; ratio to total number payment transactions&quot;, &quot;Euro; ratio to number of transactions&quot;, &quot;Euro; ratio to gross domestic product&quot;, &quot;Domestic currency; ratio to total value payment transactions&quot;, &quot;Domestic currency; ratio to number of transactions&quot;, &quot;Domestic currency per capita&quot;, &quot;Pure number per million inhabitants&quot;, &quot;Euro per million inhabitants&quot;, &quot;Domestic currency per million inhabitants&quot; ) ) tabla_unit &lt;- df %&gt;% count(Categoria=unidad, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) %&gt;% left_join(lookup_currency, by = &quot;Categoria&quot;) %&gt;% mutate(Categoria = factor(Categoria, levels = Categoria)) kable(tabla_unit) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje NombreUnidad PN 296348 44.72 Pure number EUR 258391 39.00 Euro XDF 61103 9.22 Domestic currency (incl. conversion to current currency made using a fixed parity or market exchange rate) PN_R_POP 7724 1.17 Pure number per capita EUR_R_POP 7688 1.16 Euro per capita EUR_R_TT 7555 1.14 Euro; ratio to total value payment transactions PN_R_TT 7523 1.14 Pure number; ratio to total number payment transactions EUR_R_PNT 7061 1.07 Euro; ratio to number of transactions EUR_R_B1GQ 4487 0.68 Euro; ratio to gross domestic product XDF_R_TT 1560 0.24 Domestic currency; ratio to total value payment transactions XDF_R_PNT 1309 0.20 Domestic currency; ratio to number of transactions XDF_R_POP 1163 0.18 Domestic currency per capita PN_R_POP6 335 0.05 Pure number per million inhabitants EUR_R_POP6 307 0.05 Euro per million inhabitants XDF_R_POP6 62 0.01 Domestic currency per million inhabitants Gráfico # Gráfico tabla_unit %&gt;% ggplot(aes(x = Frecuencia, y = Categoria)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(&quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = 0.5, hjust=-0.1, size = 2.2) + scale_x_continuous(labels = comma) + labs(x = &quot;Núm. de transacciones&quot;, y = &quot;unidad&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 7) ) La tabla y gráfico anteriores describen la distribución de la variable unidad del dataset, que permite caracterizar el tipo de unidad o medida en la que se reporta una observación. Destacan los grupos PN (número puro o conteo), EUR y XDF (Divisa domestica) con un 44.75%, 39% y 9.22% respectivamente. Adicionalmente, se presentan ratios por total de habitantes, número de transacciones, toal de transacciones, entre otros, en menor proporción. Carece de sentido realizar comparaciones directas entre las distintas series, se debe realizar una transformación para que puedan trabajarse de forma equivalente. anio Año en el que se procesó la transacción. Tabla tabla_country_year &lt;- df %&gt;% filter(str_length(as.character(anio)) == 4) %&gt;% count(Categoria=anio, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) kable(tabla_country_year) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje 2000 1786 0.65 2001 1939 0.70 2002 1955 0.71 2003 1955 0.71 2004 1963 0.71 2005 1963 0.71 2006 2021 0.73 2007 2022 0.73 2008 2024 0.74 2009 2025 0.74 2010 3264 1.19 2011 3270 1.19 2012 3270 1.19 2013 4954 1.80 2014 17150 6.23 2015 17836 6.48 2016 17836 6.48 2017 17916 6.51 2018 17948 6.52 2019 17948 6.52 2020 17948 6.52 2021 17948 6.52 2022 33211 12.07 2023 33466 12.16 2024 31561 11.47 Gráfico # Gráfico tabla_country_year %&gt;% ggplot(aes(x = Frecuencia, y = Categoria)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(&quot; (&quot;, Frecuencia, &quot;)&quot;)), vjust = 0.5, hjust=-0.1, size = 1.8) + scale_x_continuous(labels = comma) + labs(x = &quot;Núm. de transacciones&quot;, y = &quot;anio&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 6) ) La tabla anterior describen la distribución de la variable anio del dataset, que permite caracterizar el destino año o periodo de tiempo en el que se procesaron las transacciones. A simple vista se nota que hay años representados solos, por trimestre o semestre. Es importante notar que estas divisiones no representan acumulados entre si, solo son categorías distintas de registro. Se nota progresivamente el incremento en movimientos bancarios desde el año 2000, destacandose el incremento exponencial a partir del año 2014. Los últimos 5 años han marcado records historicos en total de transacciones registradas. tipo_monto Presenta la clasificación del monto de la transacción (revisado, no validado, valor provisional, etc). Se categoriza de la siguiente forma: - A: Valor normal. - Q Valor faltante, suprimido. - M: Valor faltante, dato no puede existir. - P Valor temporal. - L Valor faltante, dato existente pero no pudo ser recolectado. - E Valor estimado Tabla tabla_type_amount &lt;- df %&gt;% count(Categoria=tipo_monto, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) %&gt;% mutate(Categoria = factor(Categoria, levels = Categoria)) kable(tabla_type_amount) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje A 482780 72.86 Q 93601 14.13 M 48997 7.39 P 35316 5.33 L 1277 0.19 E 645 0.10 Gráfico # Gráfico tabla_type_amount %&gt;% ggplot(aes(x = Categoria, y = Frecuencia)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(&quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = -0.5, size = 3) + scale_y_continuous(labels = comma) + labs(x = &quot;Tipo de monto&quot;, y = &quot;Núm. de transacciones&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) La tabla y gráfico anteriores describen la distribución de la variable tipo_monto del dataset, que permite caracterizar la validez del monto registrado en la columna monto. De forma general vemos que el 72.86% de las observaciones fueron clasificadas como A, es decir, el monto fue validado correctamente. Mientras que el 28% restante presentan un monto poco fiable que pudo haber sido suprimido, estimado, no recolectado, etc. decimales Indica la cantidad de decimales presentes en el monto. Tabla tabla_decimals_amount &lt;- df %&gt;% count(Categoria=decimales, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) kable(tabla_decimals_amount) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje 3 601106 90.72 2 61510 9.28 Gráfico # Gráfico tabla_decimals_amount %&gt;% ggplot(aes(x = Categoria, y = Frecuencia)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(&quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = -0.5, size = 3) + scale_y_continuous(labels = comma) + labs(x = &quot;Decimales&quot;, y = &quot;Núm. de transacciones&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) La tabla y gráfico anteriores describen la distribución de la variable decimales del dataset, que permite caracterizar la cantidad de decimales en la columna monto. Resulta de utilidad pues será relacionada con la columna multiplicador_unidad. Vemos que el 90.72% de los montos tienen 3 unidades decimales, frente al casi 10% restante que tiene 2. descripcion Descripción de la transacción. Tabla tabla_description &lt;- df %&gt;% count(Categoria=descripcion, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) %&gt;% slice_head(n = 10) kable(tabla_description) Categoria Frecuencia Porcentaje Card payments, sent 3503 0.53 Cheques, sent 3491 0.53 Credit transfers, sent 3489 0.53 Direct debits, sent 3485 0.53 Other payment services, sent 2595 0.39 Total payment transactions, sent 2577 0.39 E-money payments, sent 2386 0.36 Credit transfers, sent, annual growth rate 2024 0.31 Direct debits, sent, annual growth rate 2024 0.31 Cheques, sent, annual growth rate 2022 0.31 Gráfico # Gráfico tabla_description %&gt;% ggplot(aes(y = factor(Categoria), x = Frecuencia)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(Frecuencia, &quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = 0.5, hjust=-0.01, size = 2.5) + scale_x_continuous(labels = comma) + labs(x = &quot;Núm. de transacciones&quot;, y = &quot;descripcion&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 7) ) Esta variable corresponde a un mensaje corto asociado a cada una de las transacciones, debido a la gran diversidad de entradas, solamente se mostrarán las más frecuentes como lo fueron “Card payments, sent”, “Cheques, sent”, “Credit transfers, sent”, “Direct debits, sent” con más de 3000 apariciones. multiplicador_unidad Indica el multiplicador del monto de la transacción. Tabla tabla_mulp_amount &lt;- df %&gt;% mutate(multiplicador_unidad = case_when( is.na(multiplicador_unidad) ~ as.integer(NA), multiplicador_unidad == 0 ~ 1L, TRUE ~ as.integer(multiplicador_unidad) )) %&gt;% count(Categoria=multiplicador_unidad, name = &quot;Frecuencia&quot;) %&gt;% mutate(Porcentaje = round(Frecuencia / sum(Frecuencia) * 100, 2)) %&gt;% arrange(desc(Frecuencia)) kable(tabla_mulp_amount) %&gt;% scroll_box(width = &quot;100%&quot;, height = &quot;400px&quot;) Categoria Frecuencia Porcentaje 6 601018 90.7 1 61598 9.3 Gráfico # Gráfico tabla_mulp_amount %&gt;% ggplot(aes(x = Categoria, y = Frecuencia)) + geom_col(fill = &quot;#008B8B&quot;, width = 0.6) + geom_text(aes(label = paste0(Frecuencia, &quot; (&quot;, Porcentaje, &quot;%)&quot;)), vjust = -0.5, size = 3) + scale_y_continuous(labels = comma) + labs(x = &quot;Decimales&quot;, y = &quot;Núm. de transacciones&quot;) + theme_bw(base_size = 12) + theme( plot.title = element_blank(), strip.background = element_rect(fill = &quot;gray80&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;), panel.grid.major.y = element_blank(), axis.text.y = element_text(size = 8) ) La tabla y gráfico anteriores describen la distribución de la variable multiplicador_unidad del dataset, que permite caracterizar el multiplicador aplicado a la columna monto. Vemos que el 90.72% de los montos representado por un multiplicador de 6, es decir, millones, frente al casi 10% agrupado por 0, asociado a unidades. Variables Características Numéricas monto Tabla tabla_monto &lt;- df %&gt;% select(pais_origen, monto, multiplicador_unidad, decimales, tipo_monto, unidad) %&gt;% mutate(monto_real=monto*10^(multiplicador_unidad-decimales)) kable(head(tabla_monto, 15)) pais_origen monto multiplicador_unidad decimales tipo_monto unidad monto_real AT 0.242000 6 3 A PN 242.000 AT 0.268000 6 3 A PN 268.000 AT 0.689000 6 3 A PN 689.000 AT 0.632000 6 3 A PN 632.000 AT 0.615000 6 3 A PN 615.000 AT 1.467000 6 3 A PN 1467.000 AT 1.311000 6 3 A PN 1311.000 AT 0.863000 6 3 A PN 863.000 AT 1.568711 6 3 A PN 1568.711 AT 1.754513 6 3 A PN 1754.513 AT 0.987938 6 3 A PN 987.938 AT 5008.499000 6 3 A EUR 5008499.000 AT 6501.324000 6 3 A EUR 6501324.000 AT 6017.686000 6 3 A EUR 6017686.000 AT 6412.088000 6 3 A EUR 6412088.000 Como se ilustró anteriormente, los distintos tipos de unidad hacen que sea necesario dividir el análisis de esta variable en 3 categorías principales: PN, EUR y XDF PN tabla_monto_normal &lt;- tabla_monto %&gt;% filter(unidad == &quot;PN&quot;) kable(head(tabla_monto_normal)) pais_origen monto multiplicador_unidad decimales tipo_monto unidad monto_real AT 0.242 6 3 A PN 242 AT 0.268 6 3 A PN 268 AT 0.689 6 3 A PN 689 AT 0.632 6 3 A PN 632 AT 0.615 6 3 A PN 615 AT 1.467 6 3 A PN 1467 tabla_monto_normal %&gt;% summarise( n = n(), n_missing = sum(is.na(monto_real)), pct_missing = round(n_missing / n * 100, 2), media = mean(monto_real, na.rm = TRUE), ds = sd(monto_real, na.rm = TRUE), mediana = median(monto_real, na.rm = TRUE), minimo = min(monto_real, na.rm = TRUE), maximo = max(monto_real, na.rm = TRUE), Q1 = quantile(monto_real, 0.25, na.rm = TRUE), Q3 = quantile(monto_real, 0.75, na.rm = TRUE), IQR = IQR(monto_real, na.rm = TRUE) ) ## n n_missing pct_missing media ds mediana minimo maximo Q1 ## 1 296348 66013 22.28 184743.7 2786927 20.566 -10 207701558 0 ## Q3 IQR ## 1 1248 1248 La variable monto filtrada por PN fue analizada a partir de 296.348 observaciones. El total de datos faltantes corresponde a 66.013 observaciones, aproximadamente un 22% del total. Se obtuvo un promedio de 184.654 pn con una desviación estándar de 2.786.927, donde el 50% de los totales está por debajo de 20. El valor minimo fue aproximadamente de -10 y el máximo fue de 207.701.558 pn. El 25% de los datos son inferiores a 0 y el 75% menores a 1248. Como se ve, se encuentra un porcentaje llamativo de datos negativos, probablemente relacionados a saldos pendientes o deudas. tabla_monto_normal %&gt;% ggplot(aes(x = &quot;&quot;, y = monto_real)) + geom_boxplot(fill = &quot;#a6cee3&quot;, color = &quot;#1f78b4&quot;, outlier.color = &quot;red&quot;) + stat_summary( fun = mean, geom = &quot;point&quot;, shape = 20, size = 3, color = &quot;black&quot; ) + labs( title = &quot;Diagrama de cajas y bigotes&quot;, x = &quot;&quot;, y = &quot;Núm. de trasacciones&quot; ) + theme_bw() La distibución de monto para el tipo PN es altamente asimetrica, con fuerte concentración de valores bajos y una cantidad significativa de valores extremos altos. Esto indica que aunque la mayoría de las transacciones tienen totales moderados, existen algunas con totales excepcionalmente altos que influyen notablemente en los estadísticos como la media y la desviación estándar. EUR tabla_monto_eur &lt;- tabla_monto %&gt;% filter(unidad == &quot;EUR&quot;) kable(head(tabla_monto_eur)) pais_origen monto multiplicador_unidad decimales tipo_monto unidad monto_real AT 5008.499 6 3 A EUR 5008499 AT 6501.324 6 3 A EUR 6501324 AT 6017.686 6 3 A EUR 6017686 AT 6412.088 6 3 A EUR 6412088 AT 6749.347 6 3 A EUR 6749347 AT 7398.575 6 3 A EUR 7398575 tabla_monto_eur %&gt;% summarise( n = n(), n_missing = sum(is.na(monto_real)), pct_missing = round(n_missing / n * 100, 2), media = mean(monto_real, na.rm = TRUE), ds = sd(monto_real, na.rm = TRUE), mediana = median(monto_real, na.rm = TRUE), minimo = min(monto_real, na.rm = TRUE), maximo = max(monto_real, na.rm = TRUE), Q1 = quantile(monto_real, 0.25, na.rm = TRUE), Q3 = quantile(monto_real, 0.75, na.rm = TRUE), IQR = IQR(monto_real, na.rm = TRUE) ) ## n n_missing pct_missing media ds mediana minimo ## 1 258391 55972 21.66 353443535 5407405070 27290.83 -10 ## maximo Q1 Q3 IQR ## 1 263423125212 3.685505 1656369 1656365 La variable monto filtrada por EUR fue analizada a partir de 258.391 observaciones. El total de datos faltantes corresponde a 55.972 observaciones, aproximadamente un 22% del total. Se obtuvo un promedio de 353.443.535 euros con una desviación estándar de 5.407.405.070, donde el 50% de los montos está por debajo de 27.290.83 euros. El valor minimo fue aproximadamente de -10 y el máximo fue de 263.423.125.212 euros El 25% de los datos son inferiores a 3.68 euros y el 75% menores a 1.656.369 Como se ve, se encuentra un porcentaje llamativo de datos negativos, probablemente relacionados a saldos pendientes o deudas. tabla_monto_eur %&gt;% ggplot(aes(x = &quot;&quot;, y = monto_real)) + geom_boxplot(fill = &quot;#a6cee3&quot;, color = &quot;#1f78b4&quot;, outlier.color = &quot;red&quot;) + stat_summary( fun = mean, geom = &quot;point&quot;, shape = 20, size = 3, color = &quot;black&quot; ) + labs( title = &quot;Diagrama de cajas y bigotes&quot;, x = &quot;&quot;, y = &quot;Núm. de trasacciones&quot; ) + theme_bw() XDF tabla_monto_xdf &lt;- tabla_monto %&gt;% filter(unidad == &quot;XDF&quot;) kable(head(tabla_monto_xdf)) pais_origen monto multiplicador_unidad decimales tipo_monto unidad monto_real BG NA 6 3 Q XDF NA BG 72.04537 6 3 A XDF 72045.37 BG 2880.03109 6 3 A XDF 2880031.09 BG 966.63345 6 3 A XDF 966633.45 BG 987.89895 6 3 A XDF 987898.95 CZ 26214.40400 6 3 A XDF 26214404.00 tabla_monto_xdf %&gt;% summarise( n = n(), n_missing = sum(is.na(monto_real)), pct_missing = round(n_missing / n * 100, 2), media = mean(monto_real, na.rm = TRUE), ds = sd(monto_real, na.rm = TRUE), mediana = median(monto_real, na.rm = TRUE), minimo = min(monto_real, na.rm = TRUE), maximo = max(monto_real, na.rm = TRUE), Q1 = quantile(monto_real, 0.25, na.rm = TRUE), Q3 = quantile(monto_real, 0.75, na.rm = TRUE), IQR = IQR(monto_real, na.rm = TRUE) ) ## n n_missing pct_missing media ds mediana minimo ## 1 61103 17562 28.74 5685471097 75176776461 38552 -10 ## maximo Q1 Q3 IQR ## 1 2.950583e+12 0 9495258 9495258 La variable monto filtrada por EUR fue analizada a partir de 61.103 observaciones. El total de datos faltantes corresponde a 17.562 observaciones, aproximadamente un 29% del total. Se obtuvo un promedio de 5.685.471.097 XDF con una desviación estándar de 75.176.776.461, donde el 50% de los montos está por debajo de 38.552 XDF. El valor minimo fue aproximadamente de -10 y el máximo fue de 2.950583e+12 XDF. El 25% de los datos son inferiores a 0 XDF y el 75% menores a 9.495.258 XDF. Como se ve, se encuentra un porcentaje llamativo de datos negativos, probablemente relacionados a saldos pendientes o deudas. tabla_monto_xdf %&gt;% ggplot(aes(x = &quot;&quot;, y = monto_real)) + geom_boxplot(fill = &quot;#a6cee3&quot;, color = &quot;#1f78b4&quot;, outlier.color = &quot;red&quot;) + stat_summary( fun = mean, geom = &quot;point&quot;, shape = 20, size = 3, color = &quot;black&quot; ) + labs( title = &quot;Diagrama de cajas y bigotes&quot;, x = &quot;&quot;, y = &quot;Núm. de trasacciones&quot; ) + theme_bw() La distibución de monto para el tipo XDF es altamente asimetrica, con fuerte concentración de valores bajos y una cantidad significativa de valores extremos altos. Esto indica que aunque la mayoría de las transacciones tienen totales moderados, existen algunas con totales excepcionalmente altos que influyen notablemente en los estadísticos como la media y la desviación estándar. Carga de datos datos %&gt;% select(clave=KEY, frecuencia=FREQ, pais_origen=REF_AREA, pais_destino=COUNT_AREA, tipo_trx=TYP_TRNSCTN, tipo_psp=RL_TRNSCTN, tipo_fraude=FRD_TYP, unidad=UNIT_MEASURE, anio=TIME_PERIOD, monto=OBS_VALUE, tipo_monto=OBS_STATUS, decimales=DECIMALS, descripcion=TITLE, multiplicador_unidad=UNIT_MULT)%&gt;% mutate( tipo_fraude = case_when( tipo_fraude == &quot;_Z&quot; ~ &quot;sin fraude&quot;, tipo_fraude == &quot;F&quot; ~ &quot;con fraude&quot;, TRUE ~ tipo_fraude ), anio = substr(anio, 1, 4) ) -&gt; datos2 "],["análisis-exploratorio-bivariado.html", "Chapter 3 ANÁLISIS EXPLORATORIO BIVARIADO 3.1 Análisis de la variable de respuesta frente a las variables numéricas 3.2 Análisis de la variable de respuesta frente a las variables categóricas independientes.", " Chapter 3 ANÁLISIS EXPLORATORIO BIVARIADO 3.1 Análisis de la variable de respuesta frente a las variables numéricas Realizaremos la comparación de la variable “tipo_fraude” correspondiente al tipo de fraude con la única variable númerica del dataset, la cual es “monto” correspondiente al valor de la transacción. En este caso, la variable de respuesta solo tiene dos opciones: “sin fraude” y “con fraude”, por tanto, se tomarán estos dos grupos y se analizará el valor de la transacción mediante el grafico de caja y bigotes bivariado para estas variables y se compararán las medias de estos dos grupos independientes, para ello se verificarán los supuestos de normalidad e igualdad de varianza para elegir la prueba correspondiente para al caso. 3.1.1 Gráfico multiple datos2 %&gt;% ggplot(aes(x = tipo_fraude, y = monto)) + geom_boxplot(fill = &quot;#1E90FF&quot;, alpha = 0.6, color = &quot;black&quot;) + stat_summary(fun = mean, geom = &quot;point&quot;, shape = 20, size = 3, color = &quot;red&quot;) + labs( descripcion= &quot;Distribución del valor de la transacción según el tipo de fraude&quot;, x = &quot;¿Hubo fraude? (y)&quot;, y = &quot;valor de la transacción&quot; ) + theme_bw() + theme( plot.descripcion= element_text(hjust = 0.5), strip.background = element_rect(fill = &quot;gray90&quot;, color = NA), strip.text = element_text(face = &quot;bold&quot;) ) El gráfico muestra la distribución del valor de la transacciones según su respuesta a si hubo o no fraude. En el gráfico para las operaciones no fraudulentas se observa una alta dispersión y la presencia de numerosos valores extremos, alcanzando montos muy elevados, lo que indica gran variabilidad en transacciones legítimas. En contraste, las transacciones fraudulentas aparecen concentradas en valores bajos y con escasa variabilidad. Este patrón sugiere que el fraude se asocia principalmente a importes reducidos, mientras que los valores altos corresponden mayoritariamente a operaciones no fraudulentas. 3.1.2 Comparación de ambas muestras Gracias a lo anterior, se realizará el análisis de la media de los valores de las transacciones en los grupos donde hubo y no hubo fraude. Para ello se procede realizar un análisis descriptivo básico entre los dos grupos. tabla_grupos &lt;- datos2 %&gt;% group_by(tipo_fraude) %&gt;% summarise( n = length(monto), media = mean(monto, na.rm = TRUE), ds = sd(monto, na.rm = TRUE), mediana = median(monto, na.rm = TRUE), minimo = min(monto, na.rm = TRUE), maximo = max(monto, na.rm = TRUE), Q1 = quantile(monto, 0.25, na.rm = TRUE), Q3 = quantile(monto, 0.75, na.rm = TRUE), IQR = IQR(monto, na.rm = TRUE) ) tabla_total &lt;- datos2 %&gt;% summarise( tipo_fraude = &quot;Total&quot;, n = n(), media = mean(monto, na.rm = TRUE), ds = sd(monto, na.rm = TRUE), mediana = median(monto, na.rm = TRUE), minimo = min(monto, na.rm = TRUE), maximo = max(monto, na.rm = TRUE), Q1 = quantile(monto, 0.25, na.rm = TRUE), Q3 = quantile(monto, 0.75, na.rm = TRUE), IQR = IQR(monto, na.rm = TRUE) ) bind_rows(tabla_grupos, tabla_total) %&gt;% knitr::kable( caption = &quot;Estadísticas descriptivas de monto por tipo de fraude&quot;, digits = 2, align = &quot;c&quot;, col.names = c(&quot;Tipo de fraude&quot;, &quot;n&quot;, &quot;Media&quot;, &quot;DS&quot;, &quot;Mediana&quot;, &quot;Mínimo&quot;, &quot;Máximo&quot;, &quot;Q1&quot;, &quot;Q3&quot;, &quot;IQR&quot;) ) %&gt;% kableExtra::kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = FALSE, position = &quot;center&quot; ) %&gt;% kableExtra::row_spec(0, bold = TRUE) %&gt;% kableExtra::row_spec( nrow(bind_rows(tabla_grupos, tabla_total)), bold = TRUE, background = &quot;#EFEFEF&quot; ) %&gt;% kableExtra::scroll_box( width = &quot;100%&quot;, height = &quot;400px&quot; ) Table 3.1: Table 3.2: Estadísticas descriptivas de monto por tipo de fraude Tipo de fraude n Media DS Mediana Mínimo Máximo Q1 Q3 IQR con fraude 1944 102.26 734.52 0.12 0 1.726444e+04 0 8.07 8.07 sin fraude 660672 640706.76 22185244.60 0.79 -100 2.950583e+09 0 151.37 151.37 Total 662616 638575.28 22148336.17 0.78 -100 2.950583e+09 0 149.06 149.06 La distribución del valor de las transacciones según hubo fraude o no muestra diferencias relevantes en las medidas de tendencia central. Se observa que la media es considerablemente mayor en el grupo sin fraude que en el grupo con fraude; sin embargo, las medianas en ambos casos son cercanas a cero, lo que indica una distribución fuertemente asimétrica hacia la derecha. Esta asimetría se confirma por las desviaciones estándar extremadamente elevadas y por la presencia de valores máximos muy grandes, lo que sugiere la existencia de valores atípicos significativos. En este contexto, la mediana y el rango intercuartílico resultan medidas más representativas que la media, y podría considerarse una transformación logarítmica para estabilizar la varianza y mejorar el análisis; sin embargo, existen valores negativos y no es muy viable. 3.1.3 Prueba de normalidad En esta ocasión se usará la prueba de Anderson-Darling porque las muestras son grandes y con cola hacia la derecha muy pronunciada. ad.test(datos2$monto[datos2$tipo_fraude == &quot;con fraude&quot;]) ## ## Anderson-Darling normality test ## ## data: datos2$monto[datos2$tipo_fraude == &quot;con fraude&quot;] ## A = 555.78, p-value &lt; 2.2e-16 ad.test(datos2$monto[datos2$tipo_fraude == &quot;sin fraude&quot;]) ## ## Anderson-Darling normality test ## ## data: datos2$monto[datos2$tipo_fraude == &quot;sin fraude&quot;] ## A = 195608, p-value &lt; 2.2e-16 Con un nivel de confianza del 95% y dado que en ambas pruebas el p-valor es menor a 0.05, se puede concluir que ambas poblaciones no siguen una distribución normal. 3.1.4 Test de Wilcoxon Se realizará el siguiente test de Wilcoxon porque es no paramétrico y responde a grupos que no siguen una distribución normal. grupo_F &lt;- datos2$monto[datos2$tipo_fraude == &quot;con fraude&quot;] grupo_Z &lt;- datos2$monto[datos2$tipo_fraude == &quot;sin fraude&quot;] wilcox.test(grupo_F, grupo_Z) ## ## Wilcoxon rank sum test with continuity correction ## ## data: grupo_F and grupo_Z ## W = 396270632, p-value = 6.228e-16 ## alternative hypothesis: true location shift is not equal to 0 La prueba de Wilcoxon arrojó un p-valor extremadamente pequeño menor a 0.05, lo que indica que se rechaza la hipótesis nula de igualdad en la distribución (o mediana) del monto de la transacción(monto) entre los grupos con fraude y sin fraude. En consecuencia, existe diferencia estadísticamente significativa de que los montos de las transacciones. Entonces, el valor de la transacción no se comporta de la misma manera en operaciones fraudulentas y no fraudulentas, lo que constituye un indicio de dependencia entre ambas variables. 3.2 Análisis de la variable de respuesta frente a las variables categóricas independientes. 3.2.1 Variable clave Para este analisis la variable clave (clave compuesta de la transacción) se excluye frente al tipo de fraude (tipo_fraude) porque presenta baja frecuencia por categoría, haciendo que sea poco interpretable. Además, clave corresponde a un código estructural compuesto que integra múltiples atributos técnicos, por lo que no representa una característica explicativa independiente con significado analítico propio. 3.2.2 Variable frecuencia datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(frecuencia, name = &quot;n&quot;) %&gt;% mutate( categoria = frecuencia, variable = &quot;frecuencia&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) -&gt; tabla_frecuencia kable(tabla_frecuencia, caption = &quot;Distribución de frecuencia según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;), full_width = FALSE, position = &quot;center&quot; ) %&gt;% row_spec(0, bold = TRUE) Table 3.3: Table 3.4: Distribución de frecuencia según tipo_fraude tipo_fraude variable categoria n porcentaje con fraude frecuencia H 1944 100.00000 sin fraude frecuencia A 275179 41.65138 sin fraude frecuencia H 234940 35.56076 sin fraude frecuencia Q 150553 22.78786 La distribución de la frecuencia con que se hacen las transacciones según la respuesta si hubo fraude o no, muestra diferencias relevantes en los patrones de respuesta. En los casos donde hubo fraude el 100% corresponden a transacciones con frecuencia H(mitad de año). En contraste, en el grupo donde no hubo fraude, la mayoría de transacciones (41.65%) fueron A(anuales), pero la proporción donde la transacción fue H(mitad de año) y Q(trimestral) es menor. Esta diferencia sugiere que las transacciones realizadas con frecuencia a mitad de año son más propensas a que sean fraude y en otro caso es casi nula esta posibilidad. Gráfico de barras multiple df_plot &lt;- datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(frecuencia, name = &quot;n&quot;) %&gt;% mutate( categoria = frecuencia, variable = &quot;frecuencia&quot;, porcentaje = (n / sum(n)) * 100 ) %&gt;% select(tipo_fraude, categoria, n, porcentaje) df_plot %&gt;% ggplot(aes(x = categoria, y = n, fill = tipo_fraude)) + geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.9)) + geom_text( aes(label = paste0(n, &quot; (&quot;, round(porcentaje, 1), &quot;%)&quot;)), position = position_dodge(width = 0.9), vjust = -0.3, size = 3 ) + labs( descripcion = &quot;Frecuencia con las que se hacen las transacciones (frecuencia)&quot;, x = &quot;Frecuencia con las que se hacen las transacciones (frecuencia)&quot;, y = &quot;Cantidad de transacciones&quot; ) + theme_bw() + scale_fill_brewer(palette = &quot;Set2&quot;, direction = -1) + scale_x_discrete(labels = c( &quot;A&quot; = &quot;Anual(A)&quot;, &quot;H&quot; = &quot;Mitad de año(H)&quot;, &quot;Q&quot; = &quot;Trimestral(Q)&quot; )) ## Ignoring unknown labels: ## • descripcion : &quot;Frecuencia con las que se ## hacen las transacciones (frecuencia)&quot; El gráfico muestra que la gran mayoría de las transacciones corresponden a la clase sin fraude, distribuyéndose principalmente en las categorías A (41.7%) y H (35.6%), mientras que Q representa una proporción menor. En contraste, los casos de fraude son extremadamente pocos y se concentran completamente en una sola categoría de frecuencia (H), lo que evidencia el fuerte desbalance de la variable respuesta. Prueba de independencia tabla_frecuencia &lt;- table(datos2$frecuencia, datos2$tipo_fraude) chisq.test(tabla_frecuencia) ## ## Pearson&#39;s Chi-squared test ## ## data: tabla_frecuencia ## X-squared = 3504.1, df = 2, p-value &lt; 2.2e-16 Se rechaza H₀: hay evidencia suficiente para afirmar que la variable frecuencia y tipo_fraude no son independientes; es decir, existe asociación estadísticamente significativa entre la frecuencia con la que se realiza determinado pago y el tipo de fraude. 3.2.3 Variable pais_origen datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(pais_origen, name = &quot;n&quot;) %&gt;% mutate(categoria = pais_origen, variable = &quot;pais_origen&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) %&gt;% arrange(desc(n))-&gt;tabla_COUNTRY kable(tabla_COUNTRY, caption = &quot;Distribución de pais_origen según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = FALSE, position = &quot;center&quot;, font_size = 14 ) %&gt;% scroll_box(height = &quot;400px&quot;) %&gt;% row_spec(0, bold = TRUE) Table 3.5: Table 3.6: Distribución de pais_origen según tipo_fraude tipo_fraude variable categoria n porcentaje sin fraude pais_origen RO 28746 4.3510244 sin fraude pais_origen HU 28724 4.3476945 sin fraude pais_origen PL 28203 4.2688354 sin fraude pais_origen CZ 28063 4.2476448 sin fraude pais_origen NL 27204 4.1176257 sin fraude pais_origen PT 25600 3.8748426 sin fraude pais_origen LT 25520 3.8627337 sin fraude pais_origen DE 25149 3.8065788 sin fraude pais_origen FI 25092 3.7979512 sin fraude pais_origen LU 25086 3.7970430 sin fraude pais_origen BE 25075 3.7953780 sin fraude pais_origen GR 25074 3.7952267 sin fraude pais_origen ES 25065 3.7938644 sin fraude pais_origen LV 25062 3.7934103 sin fraude pais_origen IT 25060 3.7931076 sin fraude pais_origen AT 25055 3.7923508 sin fraude pais_origen FR 25049 3.7914427 sin fraude pais_origen IE 25045 3.7908372 sin fraude pais_origen CY 25039 3.7899290 sin fraude pais_origen EE 25038 3.7897777 sin fraude pais_origen SI 25034 3.7891722 sin fraude pais_origen SK 25034 3.7891722 sin fraude pais_origen MT 25018 3.7867505 sin fraude pais_origen BG 24602 3.7237843 sin fraude pais_origen HR 23930 3.6220697 sin fraude pais_origen DK 10768 1.6298557 sin fraude pais_origen U2 3238 0.4901070 sin fraude pais_origen B0 3108 0.4704301 sin fraude pais_origen SE 1991 0.3013598 con fraude pais_origen U2 114 5.8641975 con fraude pais_origen B0 112 5.7613169 con fraude pais_origen ES 74 3.8065844 con fraude pais_origen SK 74 3.8065844 con fraude pais_origen GR 72 3.7037037 con fraude pais_origen MT 72 3.7037037 con fraude pais_origen PT 72 3.7037037 con fraude pais_origen AT 70 3.6008230 con fraude pais_origen BE 70 3.6008230 con fraude pais_origen CY 70 3.6008230 con fraude pais_origen CZ 70 3.6008230 con fraude pais_origen DE 70 3.6008230 con fraude pais_origen EE 70 3.6008230 con fraude pais_origen FI 70 3.6008230 con fraude pais_origen FR 70 3.6008230 con fraude pais_origen HU 70 3.6008230 con fraude pais_origen IE 70 3.6008230 con fraude pais_origen IT 70 3.6008230 con fraude pais_origen LT 70 3.6008230 con fraude pais_origen LU 70 3.6008230 con fraude pais_origen LV 70 3.6008230 con fraude pais_origen NL 70 3.6008230 con fraude pais_origen RO 70 3.6008230 con fraude pais_origen SI 70 3.6008230 con fraude pais_origen PL 64 3.2921811 con fraude pais_origen BG 50 2.5720165 con fraude pais_origen HR 50 2.5720165 La distribución del país de origen según la respuesta de si hubo fraude o no muestra diferencias relevantes en los patrones observados. En los casos donde se registró mayor proporción de fraude, el 5.86% corresponde a transacciones al area europea (U2), el 5.76% a estados miembros e instituciones de la Unión Europea (B0) y el 3.8% a España (ES). En contraste, en el grupo sin fraude, la mayor proporción (4.35%) corresponde al país de Romania(RO), mientras que el 4.34% a Hungria (HU) y el 4.26% a Polonia (PL) presentan valores ligeramente inferiores. Esta diferencia sugiere las zonas donde es más propenso a que las transacciones realizadas sean fraude son: en el pais de España y en las zonas del area Europea y Union Europea, mientras que las transacciones de países como RO, HU y PL tienden a concentrarse en operaciones sin fraude, lo que podría ser relevante para estrategias de segmentación o análisis de comportamiento. Gráfico de barras multiple top5_paises &lt;- datos2 %&gt;% filter(tipo_fraude == &quot;con fraude&quot;) %&gt;% count(pais_origen, name = &quot;n&quot;) %&gt;% arrange(desc(n)) %&gt;% slice_head(n = 5) %&gt;% pull(pais_origen) df_plot &lt;- datos2 %&gt;% filter(pais_origen %in% top5_paises) %&gt;% count(pais_origen, tipo_fraude, name = &quot;n&quot;) %&gt;% group_by(pais_origen) %&gt;% mutate(porcentaje = n / sum(n) * 100) %&gt;% ungroup() ggplot(df_plot, aes(x = pais_origen, y = n, fill = tipo_fraude)) + geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.9)) + geom_text(aes(label = paste0(n, &quot; (&quot;, round(porcentaje, 1), &quot;%)&quot;)), position = position_dodge(width = 0.9), vjust = -0.3, size = 3) + labs(descripcion= &quot;Top 5 países con mayor número de fraudes&quot;, x = &quot;País o Área (pais_origen)&quot;, y = &quot;Número de transacciones&quot;, fill = &quot;Tipo&quot;) + theme_bw() + scale_fill_brewer(palette = &quot;Set2&quot;, direction = -1)+ scale_x_discrete(labels = c( &quot;B0&quot; = &quot;Unión Europea (B0)&quot;, &quot;ES&quot; = &quot;España (ES)&quot;, &quot;GR&quot; = &quot;Grecia (Q)&quot;, &quot;SK&quot; = &quot;Eslovaquia (SK)&quot;, &quot;U2&quot; = &quot;Area europea (U2)&quot; )) ## Ignoring unknown labels: ## • descripcion : &quot;Top 5 países con mayor número ## de fraudes&quot; El gráfico muestra que, aunque estos cinco países concentran el mayor número absoluto de fraudes, la proporción de transacciones fraudulentas dentro de cada país sigue siendo muy baja en comparación con las no fraudulentas. En todos los casos, más del 96% de las transacciones corresponden a la categoría sin fraude, mientras que los fraudes representan entre aproximadamente 0.3% y 3.5% del total por país. Por tanto, esto sigue demostrando el fuerte desvalance de la variable de respuesta. Prueba de independencia tabla_frecuencia &lt;- table(datos2$pais_origen, datos2$tipo_fraude) chisq.test(tabla_frecuencia) ## ## Pearson&#39;s Chi-squared test ## ## data: tabla_frecuencia ## X-squared = 2288.9, df = 28, p-value &lt; 2.2e-16 Se rechaza HO: no hay evidencia suficiente para afirmar que la variable pais_origen y tipo_fraude son independientes, es decir, existe asociación estadísticamente significativa entre el país de origen y el tipo de fraude. 3.2.4 Variable pais_destino datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(pais_destino, name = &quot;n&quot;) %&gt;% mutate(categoria = pais_destino, variable = &quot;pais_destino&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) %&gt;% arrange(desc(n))-&gt;tabla_ORGANIZATION kable(tabla_ORGANIZATION, caption = &quot;Distribución de pais_destino según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = FALSE, position = &quot;center&quot;, font_size = 14 ) %&gt;% scroll_box(height = &quot;400px&quot;) %&gt;% row_spec(0, bold = TRUE) Table 3.7: Table 3.8: Distribución de pais_destino según tipo_fraude tipo_fraude variable categoria n porcentaje sin fraude pais_destino W0 86789 13.1364732 sin fraude pais_destino W1 21755 3.2928594 sin fraude pais_destino W2 21507 3.2553219 sin fraude pais_destino G1 17392 2.6324712 sin fraude pais_destino SE 16057 2.4304042 sin fraude pais_destino DK 15769 2.3868122 sin fraude pais_destino BG 15488 2.3442798 sin fraude pais_destino GR 15440 2.3370144 sin fraude pais_destino AT 15437 2.3365604 sin fraude pais_destino BE 15437 2.3365604 sin fraude pais_destino SI 15437 2.3365604 sin fraude pais_destino SK 15437 2.3365604 sin fraude pais_destino CY 15436 2.3364090 sin fraude pais_destino ES 15436 2.3364090 sin fraude pais_destino FI 15436 2.3364090 sin fraude pais_destino FR 15436 2.3364090 sin fraude pais_destino IT 15436 2.3364090 sin fraude pais_destino DE 15435 2.3362576 sin fraude pais_destino IE 15435 2.3362576 sin fraude pais_destino EE 15434 2.3361063 sin fraude pais_destino LU 15434 2.3361063 sin fraude pais_destino MT 15433 2.3359549 sin fraude pais_destino LV 15432 2.3358035 sin fraude pais_destino HR 15429 2.3353495 sin fraude pais_destino LT 15417 2.3335331 sin fraude pais_destino PT 15417 2.3335331 sin fraude pais_destino CZ 15413 2.3329277 sin fraude pais_destino PL 15401 2.3311114 sin fraude pais_destino HU 15386 2.3288409 sin fraude pais_destino RO 15385 2.3286896 sin fraude pais_destino NL 15369 2.3262678 sin fraude pais_destino G3 13173 1.9938790 sin fraude pais_destino NO 11735 1.7762218 sin fraude pais_destino IS 11732 1.7757677 sin fraude pais_destino LI 11727 1.7750109 sin fraude pais_destino AR 2960 0.4480287 sin fraude pais_destino AU 2960 0.4480287 sin fraude pais_destino BR 2960 0.4480287 sin fraude pais_destino CA 2960 0.4480287 sin fraude pais_destino CN 2960 0.4480287 sin fraude pais_destino GB 2960 0.4480287 sin fraude pais_destino ID 2960 0.4480287 sin fraude pais_destino IN 2960 0.4480287 sin fraude pais_destino JP 2960 0.4480287 sin fraude pais_destino KR 2960 0.4480287 sin fraude pais_destino MX 2960 0.4480287 sin fraude pais_destino RU 2960 0.4480287 sin fraude pais_destino SA 2960 0.4480287 sin fraude pais_destino TR 2960 0.4480287 sin fraude pais_destino US 2960 0.4480287 sin fraude pais_destino ZA 2960 0.4480287 con fraude pais_destino W0 1944 100.0000000 La distribución de pais_destino según tipo_fraude muestra que las transacciones no fraudulentas se encuentran ampliamente distribuidas entre diversas áreas geográficas, destacándose entidades areas de referencia del mundo (W0) como la categoría con mayor participación (13.13%), seguida por el resto del mundo (W1) y hogares del mundo (W2), mientras que el resto de áreas presentan proporciones relativamente homogéneas alrededor del 2–3%. En contraste, los casos de fraude se concentran totalmente en la categoría W0, representando el 100% de los registros fraudulentos observados. Esta estructura evidencia una fuerte concentración geográfica del fraude frente a una distribución más diversificada de las transacciones legítimas, lo que sugiere que el riesgo no es uniforme entre áreas y que esta variable podría aportar capacidad explicativa en un modelo de clasificación. Gráfico de cajas multiple top5_paises &lt;- datos2 %&gt;% filter(tipo_fraude == &quot;con fraude&quot;) %&gt;% count(pais_destino, name = &quot;n&quot;) %&gt;% arrange(desc(n)) %&gt;% slice_head(n = 5) %&gt;% pull(pais_destino) df_plot &lt;- datos2 %&gt;% filter(pais_destino %in% top5_paises) %&gt;% count(pais_destino, tipo_fraude, name = &quot;n&quot;) %&gt;% group_by(pais_destino) %&gt;% mutate(porcentaje = n / sum(n) * 100) %&gt;% ungroup() ggplot(df_plot, aes(x = pais_destino, y = n, fill = tipo_fraude)) + geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.9)) + geom_text(aes(label = paste0(n, &quot; (&quot;, round(porcentaje, 1), &quot;%)&quot;)), position = position_dodge(width = 0.9), vjust = -0.3, size = 3) + labs(descripcion= &quot;Top 5 países con mayor número de fraudes&quot;, x = &quot;País (pais_destino)&quot;, y = &quot;Número de transacciones&quot;, fill = &quot;Tipo&quot;) + theme_bw() + scale_fill_brewer(palette = &quot;Set2&quot;,direction = -1)+ scale_x_discrete(labels = c( &quot;W0&quot; = &quot;Mundo, todas las entidades, incluido el área de referencia (W0)&quot; )) ## Ignoring unknown labels: ## • descripcion : &quot;Top 5 países con mayor número ## de fraudes&quot; El gráfico evidencia que el área W0 (Mundo, todas las entidades, incluido el área de referencia, incluido IO) concentra la totalidad de los fraudes observados (1,944 casos), aunque estos representan solo el 2.2% del total de transacciones en esa región, frente al 97.8% correspondiente a operaciones no fraudulentas. Esto indica que, si bien el fraude está focalizado geográficamente en W0, su ocurrencia sigue siendo baja en términos proporcionales, confirmando el fuerte desbalance de la variable. Prueba de independencia tabla_frecuencia &lt;- table(datos2$pais_destino, datos2$tipo_fraude) chisq.test(tabla_frecuencia) ## ## Pearson&#39;s Chi-squared test ## ## data: tabla_frecuencia ## X-squared = 12610, df = 50, p-value &lt; 2.2e-16 Se rechaza H0: no hay evidencia suficiente para afirmar que la variable pais_destino y tipo_fraude son independientes, es decir, existe asociación estadísticamente significativa entre la institución origen de ka transacción y el tipo de fraude. 3.2.5 Variable tipo_trx datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(tipo_trx, name = &quot;n&quot;) %&gt;% mutate(categoria = tipo_trx, variable = &quot;tipo_trx&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) %&gt;% arrange(desc(n))-&gt;tabla_tipo_trx kable(tabla_tipo_trx, caption = &quot;Distribución de tipo_trx según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = FALSE, position = &quot;center&quot;, font_size = 14 ) %&gt;% scroll_box(height = &quot;400px&quot;) %&gt;% row_spec(0, bold = TRUE) Table 3.9: Table 3.10: Distribución de tipo_trx según tipo_fraude tipo_fraude variable categoria n porcentaje sin fraude tipo_trx DD 96303 14.5765221 sin fraude tipo_trx CT0 96293 14.5750085 sin fraude tipo_trx EMP0 92400 13.9857600 sin fraude tipo_trx CHQ 92171 13.9510983 sin fraude tipo_trx CP0 59031 8.9349935 sin fraude tipo_trx SER 56995 8.6268224 sin fraude tipo_trx MREM 52242 7.9074034 sin fraude tipo_trx TOTL 48119 7.2833418 sin fraude tipo_trx TOTL1 44336 6.7107430 sin fraude tipo_trx CW1 18708 2.8316623 sin fraude tipo_trx ND1 1624 0.2458103 sin fraude tipo_trx ND2 1624 0.2458103 con fraude tipo_trx CP0 734 37.7572016 sin fraude tipo_trx ND0 415 0.0628148 sin fraude tipo_trx ND3 411 0.0622094 con fraude tipo_trx DD 372 19.1358025 con fraude tipo_trx EMP0 372 19.1358025 con fraude tipo_trx CT0 370 19.0329218 con fraude tipo_trx TOTL 32 1.6460905 con fraude tipo_trx CW1 30 1.5432099 con fraude tipo_trx MREM 30 1.5432099 con fraude tipo_trx CHQ 2 0.1028807 con fraude tipo_trx SER 2 0.1028807 La distribución del tipo de transacción según la respuesta de si hubo fraude o no muestra diferencias relevantes en los patrones observados. En los tres casos donde hubo mayor fraude, el 37.75% corresponde a transacciones de pagos con tarjeta(CPO), el 19.13% al tipo de débitos directos (DD) y el 19.13% a pagos con dinero electrónico (EMPO), que fueron las de mayor porcentaje frente a los otros tipos. En contraste, en el grupo donde no hubo fraude, la mayoría (14.57%) fueron transacciones del tipo DD (débitos directos). Asimismo, la proporción de transacciones de tipo transferencias de crédito (CTO) fue del 14.57% y a pagos con dinero electrónico(EMPO) fue del 13.98%, que es ligeramente menor, pero se mantiene en un rango similar de porcentajes. Esta diferencia sugiere que las transacciones de tipo CPO, DD y EMPO son más propensas a presentar fraude. Sin embargo, dos de estas categorías (DD y EMPO) también estuvieron entre las tres con mayor proporción de transacciones sin fraude. La única que se diferencia claramente es el tipo de transacción de pagos con tarjeta (CPO), que resulta ser la más propensa a presentar fraude según el análisis, en comparación con otras que también registraron fraude. Gráfico de barras múltiple top5_paises &lt;- datos2 %&gt;% filter(tipo_fraude == &quot;con fraude&quot;) %&gt;% count(tipo_trx, name = &quot;n&quot;) %&gt;% arrange(desc(n)) %&gt;% slice_head(n = 5) %&gt;% pull(tipo_trx) df_plot &lt;- datos2 %&gt;% filter(tipo_trx %in% top5_paises) %&gt;% count(tipo_trx, tipo_fraude, name = &quot;n&quot;) %&gt;% group_by(tipo_trx) %&gt;% mutate(porcentaje = n / sum(n) * 100) %&gt;% ungroup() ggplot(df_plot, aes(x = tipo_trx, y = n, fill = tipo_fraude)) + geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.9)) + geom_text(aes(label = paste0(n, &quot; (&quot;, round(porcentaje, 1), &quot;%)&quot;)), position = position_dodge(width = 0.9), vjust = -0.3, size = 3) + labs(DESCRIPTION= &quot;Top 5 países con mayor número de fraudes&quot;, x = &quot;Tipo de transacción (tipo_trx)&quot;, y = &quot;Número de transacciones&quot;, fill = &quot;Tipo&quot;) + theme_bw() + scale_fill_brewer(palette = &quot;Set2&quot;, direction = -1)+ scale_x_discrete(labels = c( &quot;CP0&quot; = &quot;pagos con tarjeta (CP0)&quot;, &quot;CT0&quot; = &quot;Transferencias de crédito (CT0)&quot;, &quot;DD&quot; = &quot;Débitos directos (DD)&quot;, &quot;EMP0&quot; = &quot;Pagos con dinero electrónico (EMP0)&quot;, &quot;TOTL&quot; = &quot;Transacciones de pagos totales (TOTL)&quot; ))+ coord_flip(clip = &quot;off&quot;) ## Ignoring unknown labels: ## • DESCRIPTION : &quot;Top 5 países con mayor número ## de fraudes&quot; El gráfico se muestran los tipos de transferencia con pagos con tarjeta (CPO), Transferencias de crédito (CTO), débitos directos (DD), Pagos con dinero electrónico (EMPO) y Transacciones de pago totales (TOTL); aunque estos 5 tipos de transferencia concentran el mayor número absoluto de fraudes, la proporción de transacciones fraudulentas dentro de cada tipo sigue siendo muy baja en comparación con las no fraudulentas. En todos los casos, más del 98% de las transacciones corresponden a la categoría sin fraude, mientras que los fraudes representan entre aproximadamente 0.1% y 1.2% del total por cada tipo de transacción. Por tanto, esto sigue demostrando el fuerte desvalance de la variable de respuesta y refleja que son casos excasos los casos de fraude frente a donde no hay. Prueba de independencia tabla_frecuencia &lt;- table(datos2$tipo_trx, datos2$tipo_fraude) chisq.test(tabla_frecuencia) ## ## Pearson&#39;s Chi-squared test ## ## data: tabla_frecuencia ## X-squared = 2645, df = 13, p-value &lt; 2.2e-16 Se rechaza H0: no hay evidencia suficiente para afirmar que la variable tipo_trx y tipo_fraude son independientes, es decir, existe asociación estadísticamente significativa entre la clasificación de la transacción y el tipo de fraude. 3.2.6 Variable tipo_psp datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(tipo_psp, name = &quot;n&quot;) %&gt;% mutate(categoria = tipo_psp, variable = &quot;tipo_psp&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) %&gt;% arrange(desc(n))-&gt;tabla_tipo_psp kable(tabla_tipo_psp, caption = &quot;Distribución de tipo_psp según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = FALSE, position = &quot;center&quot;, font_size = 14 ) %&gt;% row_spec(0, bold = TRUE) Table 3.11: Table 3.12: Distribución de tipo_psp según tipo_fraude tipo_fraude variable categoria n porcentaje sin fraude tipo_psp 1 386520 58.5040686 sin fraude tipo_psp 2 270078 40.8792865 sin fraude tipo_psp _Z 4074 0.6166449 con fraude tipo_psp 1 1204 61.9341564 con fraude tipo_psp 2 740 38.0658436 La distribución de tipo_psp según la respuesta si hubo fraude o no, muestra diferencias relevantes en los patrones de respuesta. Entre las transacciones donde hubo fraude, el 61.93% corresponden a transacciones con rol tipo 1(PSP del pagador) y el 38.06% del tipo 2(PSP del beneficiario). En contraste, en el grupo donde no hubo fraude, la mayoría 58.5% fueron transacciones del rol tipo 1, mientras que el 40.87% al rol tipo 2 y 0.61% no aplica (_Z). Esta diferencia sugiere que las transacciones del rol tipo 1 son más propensas a que sean fraude, En general, las transacciones del tipo 1 son las que más se usan y son las que tienen mayor porcentaje de fraude respecto a las de tipo 2. df_plot &lt;- datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(tipo_psp, name = &quot;n&quot;) %&gt;% mutate(categoria = tipo_psp, variable = &quot;tipo_psp&quot;, porcentaje = (n / sum(n)) * 100) %&gt;% select(tipo_fraude, categoria, n, porcentaje) df_plot %&gt;% ggplot(aes(x = categoria, y = n, fill = tipo_fraude)) + geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.9)) + geom_text(aes(label = paste0(n, &quot; (&quot;, round(porcentaje, 1), &quot;%)&quot;)), position = position_dodge(width = 0.9), vjust = -0.3, size = 3) + labs(descripcion= &quot;Rol de las transacciones&quot;, x = &quot;Rol de las transacciones(tipo_psp)&quot;, y = &quot;Cantclavead de transacciones&quot; ) + theme_bw() + scale_fill_brewer(palette = &quot;Set2&quot;, direction = -1) + scale_x_discrete(labels = c( &quot;_Z&quot; = &quot;No aplica (_Z)&quot;, &quot;1&quot; = &quot;PSP del pagador (1)&quot;, &quot;2&quot; = &quot;PSP del beneficiario (2)&quot; )) ## Ignoring unknown labels: ## • descripcion : &quot;Rol de las transacciones&quot; La mayoría de las transacciones se concentran en el rol 1 (Payer’s PSP) con 58,5%, seguido del rol 2 (Payee’s PSP) con 40,9%, mientras que la categoría _Z es marginal (0,6%). En los casos de fraude (F) se mantiene esta tendencia, predominando también el rol 1 (61,9%), lo que indica que tanto el volumen total como los eventos fraudulentos se concentran principalmente en el PSP del pagador. Prueba de independencia tabla_frecuencia &lt;- table(datos2$tipo_psp, datos2$tipo_fraude) chisq.test(tabla_frecuencia) ## ## Pearson&#39;s Chi-squared test ## ## data: tabla_frecuencia ## X-squared = 19.639, df = 2, p-value = 5.439e-05 Se rechaza H0: no hay evidencia suficiente para afirmar que la variable tipo_psp y tipo_fraude son independientes, es decir, existe asociación estadísticamente significativa entre la clasificación de la entidad procesa la transacción y el tipo de fraude. 3.2.7 Variable unidad datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(unidad, name = &quot;n&quot;) %&gt;% mutate(categoria = unidad, variable = &quot;unidad&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) %&gt;% arrange(desc(n))-&gt;tabla_unidad kable(tabla_unidad, caption = &quot;Distribución de unidad según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = FALSE, position = &quot;center&quot;, font_size = 14 ) %&gt;% scroll_box(height = &quot;400px&quot;) %&gt;% row_spec(0, bold = TRUE) Table 3.13: Table 3.14: Distribución de unidad según tipo_fraude tipo_fraude variable categoria n porcentaje sin fraude unidad PN 295384 44.7096290 sin fraude unidad EUR 257589 38.9889385 sin fraude unidad XDF 60941 9.2240930 sin fraude unidad PN_R_POP 7724 1.1691127 sin fraude unidad EUR_R_POP 7688 1.1636637 sin fraude unidad EUR_R_TT 7555 1.1435326 sin fraude unidad PN_R_TT 7523 1.1386891 sin fraude unidad EUR_R_PNT 7061 1.0687603 sin fraude unidad EUR_R_B1GQ 4487 0.6791570 sin fraude unidad XDF_R_TT 1560 0.2361232 sin fraude unidad XDF_R_PNT 1309 0.1981316 sin fraude unidad XDF_R_POP 1163 0.1760329 con fraude unidad PN 964 49.5884774 con fraude unidad EUR 802 41.2551440 sin fraude unidad PN_R_POP6 325 0.0491923 sin fraude unidad EUR_R_POP6 301 0.0455597 con fraude unidad XDF 162 8.3333333 sin fraude unidad XDF_R_POP6 62 0.0093844 con fraude unidad PN_R_POP6 10 0.5144033 con fraude unidad EUR_R_POP6 6 0.3086420 La distribución de la unidad o divisa involucrada en las transacciones según la respuesta de si hubo fraude o no muestra diferencias relevantes en los patrones observados. En los tres casos donde hubo mayor fraude, el 49.58% corresponde a transacciones con divisa o unidad PN (número puro), el 41.25% a EUR (euro) y el 8.33% a XDF (moneda nacional), que fueron las de mayor porcentaje frente a los otros tipos. En contraste, en el grupo donde no hubo fraude, la mayoría (44.7%) fueron transacciones con divisa o unidad EUR. Asimismo, la proporción de transacciones con moneda nacional fue del38.98% y número puro per cápita (PN_R_POP) con un 13.98%, que es ligeramente menor. Esta diferencia sugiere que las transacciones realizadas con divisa o unidad PN, EUR y XDF son más propensas a presentar fraude. Sin embargo, dos de estas categorías (EUR y XDF) también estuvieron entre las tres con mayor proporción de transacciones sin fraude. La única que se diferencia claramente es el tipo de transacción donde se utilizó PN (número puro), que resulta ser la más propensa a presentar fraude según el análisis, en comparación con otras que también registraron fraude. Gráfico de barras multiple top5_paises &lt;- datos2 %&gt;% filter(tipo_fraude == &quot;con fraude&quot;) %&gt;% count(unidad, name = &quot;n&quot;) %&gt;% arrange(desc(n)) %&gt;% slice_head(n = 5) %&gt;% pull(unidad) df_plot &lt;- datos2 %&gt;% filter(unidad %in% top5_paises) %&gt;% count(unidad, tipo_fraude, name = &quot;n&quot;) %&gt;% group_by(unidad) %&gt;% mutate(porcentaje = n / sum(n) * 100) %&gt;% ungroup() ggplot(df_plot, aes(x = unidad, y = n, fill = tipo_fraude)) + geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.9)) + geom_text(aes(label = paste0(n, &quot; (&quot;, round(porcentaje, 1), &quot;%)&quot;)), position = position_dodge(width = 0.9), vjust = -0.3, size = 3) + labs(descripcion= &quot;Top 5 países con mayor número de fraudes&quot;, x = &quot;Divisa o unidad de la transacción (unidad)&quot;, y = &quot;Número de transacciones&quot;, fill = &quot;Tipo&quot;) + theme_bw() + scale_fill_brewer(palette = &quot;Set2&quot;, direction = -1) ## Ignoring unknown labels: ## • descripcion : &quot;Top 5 países con mayor número ## de fraudes&quot; La mayoría de las transacciones se registran en la categoría sin fraude, con proporciones cercanas al 99.7% en todas las unidades, mientras que las transacciones con fraude representa apenas alrededor del 0.3%. Aunque número puro (PN), Euro (EUR) y moneda nacional (XDF) concentran los mayores volúmenes, la incidencia relativa del fraude se mantiene estable entre monedas, lo que sugiere que el fraude se explica más por el volumen total de operaciones que por la unidad de transacción. Prueba de independencia tabla_frecuencia &lt;- table(datos2$unidad, datos2$tipo_fraude) chisq.test(tabla_frecuencia) ## ## Pearson&#39;s Chi-squared test ## ## data: tabla_frecuencia ## X-squared = 262.21, df = 14, p-value &lt; 2.2e-16 Se rechaza H0: no hay evidencia suficiente para afirmar que la variable unidad y tipo_fraude son independientes, es decir, existe asociación estadísticamente significativa entre unidad o divisa involucrada en la transacción y el tipo de fraude. 3.2.8 Variable anio (año) datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(anio, name = &quot;n&quot;) %&gt;% mutate(categoria = anio, variable = &quot;anio&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) %&gt;% head(n=40)-&gt;tabla_anio kable(tabla_anio, caption = &quot;Distribución de anio según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = FALSE, position = &quot;center&quot;, font_size = 14 ) %&gt;% scroll_box(height = &quot;400px&quot;) %&gt;% row_spec(0, bold = TRUE) Table 3.15: Table 3.16: Distribución de anio según tipo_fraude tipo_fraude variable categoria n porcentaje con fraude anio 2022 534 27.4691358 con fraude anio 2023 564 29.0123457 con fraude anio 2024 564 29.0123457 con fraude anio 2025 282 14.5061728 sin fraude anio 2000 1786 0.2703308 sin fraude anio 2001 1939 0.2934891 sin fraude anio 2002 1955 0.2959108 sin fraude anio 2003 1955 0.2959108 sin fraude anio 2004 1963 0.2971217 sin fraude anio 2005 1963 0.2971217 sin fraude anio 2006 2021 0.3059007 sin fraude anio 2007 2022 0.3060520 sin fraude anio 2008 2024 0.3063547 sin fraude anio 2009 2025 0.3065061 sin fraude anio 2010 3264 0.4940424 sin fraude anio 2011 3270 0.4949506 sin fraude anio 2012 3270 0.4949506 sin fraude anio 2013 4954 0.7498426 sin fraude anio 2014 17150 2.5958418 sin fraude anio 2015 17836 2.6996755 sin fraude anio 2016 17836 2.6996755 sin fraude anio 2017 17916 2.7117844 sin fraude anio 2018 17948 2.7166279 sin fraude anio 2019 17948 2.7166279 sin fraude anio 2020 17948 2.7166279 sin fraude anio 2021 17948 2.7166279 sin fraude anio 2022 136295 20.6297527 sin fraude anio 2023 143295 21.6892800 sin fraude anio 2024 140071 21.2012920 sin fraude anio 2025 64070 9.6977017 Para este analisis la variable anio (año) se excluye frente a tipo_fraude porque presenta baja frecuencia por categoría, haciendo que sea poco interpretable. Además, anio corresponde a un código estructural compuesto que integra múltiples atributos técnicos, por lo que no representa una característica explicativa independiente con significado analítico propio. Cabe aclarar que aparecen pocas filas porque solo se mostraron las 40 primeras. Asimismo, no se realizará la prueba de independencia para esta variable con la de respuesta porque no es necesario para nuestro análisis y por la forma de esta variable. Lo único que se puede extraer de esta tabla es que en el año 2022, 2023 y 2024 fueron los años donde más fraude hubo, en el contexto de esta nueva era tecnológica producto del covid 19. 3.2.9 Variable tipo_monto datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(tipo_monto, name = &quot;n&quot;) %&gt;% mutate(categoria = tipo_monto, variable = &quot;tipo_monto&quot;, porcentaje = (n / sum(n)) * 100, ) %&gt;% select(tipo_fraude, variable, categoria, n, porcentaje) %&gt;% head(n=40)-&gt;tabla_tipo_monto kable(tabla_tipo_monto, caption = &quot;Distribución de tipo_monto según tipo_fraude&quot;, align = &quot;c&quot;) %&gt;% kable_styling( bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;), full_width = FALSE, position = &quot;center&quot;, font_size = 14 ) %&gt;% row_spec(0, bold = TRUE) Table 3.17: Table 3.18: Distribución de tipo_monto según tipo_fraude tipo_fraude variable categoria n porcentaje con fraude tipo_monto A 1475 75.8744856 con fraude tipo_monto M 42 2.1604938 con fraude tipo_monto P 251 12.9115226 con fraude tipo_monto Q 176 9.0534979 sin fraude tipo_monto A 481305 72.8508246 sin fraude tipo_monto E 645 0.0976279 sin fraude tipo_monto L 1277 0.1932880 sin fraude tipo_monto M 48955 7.4098796 sin fraude tipo_monto P 35065 5.3074748 sin fraude tipo_monto Q 93425 14.1409050 Para este análisis, en la variable tipo_monto no se excluirán las categorías L (valor faltante; los datos existen pero no fueron recopilados), M (valor faltante; los datos no pueden existir) y Q (valor faltante; suprimido), porque, a pesar de que corresponden a valores faltantes, la variable de respuesta de la investigación es si hubo o no fraude. Por tanto, se busca identificar este aspecto antes que determinar de cuánto fue el fraude. En este caso, la distribución del estado de la observación según tipo_fraude muestra diferencias relevantes en los patrones observados. Entre las transacciones con fraude (F), la categoría A (valor normal) es claramente mayoritaria (75.87%), seguida por P (valor provisional) (12.91%) y Q (valor faltante; reprimido) (9.05%), mientras que M (valor faltante; los datos no pueden existir) presenta una participación reducida (2.16%). En contraste, en las transacciones sin fraude, aunque A también predomina (72.85%), se aprecia una mayor presencia relativa de Q (14.14%), M (7.41%) y P (5.30%), además de categorías marginales como E y L. Esta diferencia sugiere que los eventos de fraude tienden a concentrarse principalmente en el estado A, mientras que las operaciones legítimas presentan una distribución más diversificada, lo que podría ser relevante para el análisis de riesgo y la identificación de patrones de comportamiento. Gráfico de barras multiple df_plot &lt;- datos2 %&gt;% group_by(tipo_fraude) %&gt;% count(tipo_monto, name = &quot;n&quot;) %&gt;% mutate(categoria = tipo_monto, variable = &quot;tipo_monto&quot;, porcentaje = (n / sum(n)) * 100) %&gt;% select(tipo_fraude, categoria, n, porcentaje) df_plot %&gt;% ggplot(aes(x = categoria, y = n, fill = tipo_fraude)) + geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.9)) + geom_text(aes(label = paste0(n, &quot; (&quot;, round(porcentaje, 1), &quot;%)&quot;)), position = position_dodge(width = 0.9), vjust = -0.3, size = 3) + labs(descripcion= &quot;Estado de la observación del valor de la transacción (tipo_monto)&quot;, x = &quot;Estado de la observación del valor de la transacción (tipo_monto)&quot;, y = &quot;Cantclavead de transacciones&quot; ) + theme_bw() + scale_fill_brewer(palette = &quot;Set2&quot;, direction = -1) ## Ignoring unknown labels: ## • descripcion : &quot;Estado de la observación del ## valor de la transacción (tipo_monto)&quot; El gráfico de tipo_monto indica que la categoría A concentra la mayor parte de las transacciones (≈72.9%), seguclavea por Q (14.1%), M (7.4%) y P (5.3%), mientras que E y L son marginales. En los casos de fraude (F) se mantiene la misma estructura general, con predominio de A, aunque con una participación relativamente mayor en P y Q frente al conjunto total. Esto sugiere que, si bien la distribución global está dominada por A, ciertas categorías como P y Q adquieren mayor relevancia relativa dentro de las operaciones fraudulentas. Prueba de independencia tabla_frecuencia &lt;- table(datos2$tipo_monto, datos2$tipo_fraude) chisq.test(tabla_frecuencia) ## ## Pearson&#39;s Chi-squared test ## ## data: tabla_frecuencia ## X-squared = 326.11, df = 5, p-value &lt; 2.2e-16 Se rechaza H0: no hay evidencia suficiente para afirmar que la variable tipo_monto y tipo_fraude son independientes, es decir, existe asociación estadísticamente significativa entre el tipo de monto de la transacción y el tipo de fraude. 3.2.10 Variable descripcion Para este analisis la variable descripcionse excluye frente a tipo_fraude porque corresponde a un código estructural compuesto que integra múltiples atributos técnicos, en esta variable se describe la transacción y dice si hubo fraude, el tipo de transacción y si fue enviada, por lo cual, se tiene esta informacion de otras variables ya analizadas previamente. Asimismo, no se realizará la prueba de independencia para esta variable con la de respuesta porque no es necesario para nuestro análisis y por la forma de esta variable. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
